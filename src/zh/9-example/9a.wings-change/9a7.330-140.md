---
isOriginal: true
icon: circle-up
category:
  - 实战
  - 升迁
---

# 9A7.升迁 3.3.140 手册

在已升级到`3.2.100`后，从`3.2.130`开始的升级手册，包括，

* 3.3.140 Bloodseeker 血魔

## ![Bloodseeker](/bloodseeker_minimap_icon.png) 9A7.1.Bloodseeker 血魔 3.3.140.SS

version变为 `3.3.140`，包括了很多破坏性重构。

### 1a.SpringBoot 3.3 升级

* [Spring-Boot-3.3-Release-Notes](https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.3-Release-Notes)

### 1b.Mirana 2.8.0 重构

* `CodeEnum` 从 `.mirana.code` 移动 `.mirana.i18n`
* `I18nString` 更名 `setI18n()` 为 `setI18nCache`
* `I18nString` 为 code/hint/args 增加 `I18n` 前缀
* `R` 重构参数顺序为 `(data,code,message)`
  - `castType` 变为 `cast`
  - `xxData` 变为 `xx(data)`
  - `xx(message)` 变为 `xxMessage`
  - `setI18nMessage` 变为 `setI18nCode().setI18nArgs().cast()`
  - 删除 `hasXxx`，使用`getXxx` 来检查
* `AssertArgs` 增加 `name` 参数
* `AssertState` 增加 `name` 参数
* `TypedReg` 和 `TypedKey`
  - `get(Map)` 变为 `get(Function|Map, boolean)`
  - `getOr(Map, _)` 变为 `getOr(Function|Map, _)`
  - `tryOr(Object, _)` 变为 `tryOr(Function|Map, _)`

### 1c.TypedRef 作为常量

TypedRef 取代魔法常量作为key，

* HazelcastConst
* SlardarServletConst

```diff
-request.setAttribute(AttrUserId, pass.getUserId());
+request.setAttribute(AttrUserId.value, pass.getUserId());
```
