import{_ as c}from"./_plugin-vue_export-helper.cdc0426e.js";import{r as n,o as l,c as o,b as e,e as a,d as t,f as r}from"./app.617bcbf8.js";const d={},s=r(`<h1 id="_4g-\u8C03\u7528\u8BA1\u65F6" tabindex="-1"><a class="header-anchor" href="#_4g-\u8C03\u7528\u8BA1\u65F6" aria-hidden="true">#</a> 4G.\u8C03\u7528\u8BA1\u65F6</h1><p>\u5F00\u7BB1\u5373\u7528\u7684\u7B80\u5355\u7684\u6027\u80FD\u5206\u6790\uFF0C\u6162\u8BF7\u6C42\u8BB0\u5F55\uFF0C\u5C5E\u4E8E\u8C03\u8BD5\u529F\u80FD\uFF0C\u9ED8\u8BA4\u5173\u95ED\u3002</p><ul><li>\u6A21\u5757\u5F00\u5173 - spring.wings.warlock.enabled.watching</li><li>\u6570\u636E\u5C42 - wings.warlock.watching.jooq-threshold</li><li>\u670D\u52A1\u5C42 - wings.warlock.watching.service-threshold</li><li>Web\u5C42 - wings.warlock.watching.controller-threshold</li></ul><p>\u901A\u8FC7\u4EE5\u4E0A\u914D\u7F6E\u6587\u4EF6\uFF0C\u8BBE\u7F6E\u6A21\u5757\u662F\u5426\u5F00\u542F\uFF0C\u4EE5\u53CA\u5404\u5C42\u7684\u6162\u54CD\u5E94\u7684\u9608\u503C\uFF0C <code>-1</code>\u8868\u793A\u5173\u95ED\uFF0C\u800C<code>0</code>\u8868\u793A\u5168\u90E8\u5F00\u542F\uFF0C\u5176\u4ED6\u6B63\u5F0F\u503C\u662Fslow\u7684\u9608\u503C\uFF0C\u6BEB\u79D2\u6570\u3002</p><h2 id="_4g-1-\u5B9E\u73B0\u539F\u7406" tabindex="-1"><a class="header-anchor" href="#_4g-1-\u5B9E\u73B0\u539F\u7406" aria-hidden="true">#</a> 4G.1.\u5B9E\u73B0\u539F\u7406</h2><p>\u5404\u5C42\u9762\u7684<code>\u8BA1\u65F6</code>\u529F\u80FD\uFF0C\u5206\u6563\u5728\u4E0D\u540C\u7684\u5DE5\u7A0B\u6A21\u5757\u4E2D\uFF0C\u5728Warlock\u5B9E\u73B0\u4E86\u81EA\u52A8\u914D\u7F6E\u3002</p><ul><li>Controller\u5C42\uFF0C\u57FA\u4E8EInterceptor\u5B9E\u73B0\uFF0C\u9ED8\u8BA4\u5BF9\u5168\u90E8URL\u751F\u6548</li><li>Service\u5C42\uFF0C\u57FA\u4E8EAOP\u5B9E\u73B0\uFF0C\u9700\u8981\u624B\u52A8\u4F7F\u7528@Watching\u6CE8\u89E3\u6807\u8BB0\u65B9\u6CD5</li><li>Database\u5C42\uFF0C\u57FA\u4E8EJooq\u7684ExecuteListener\uFF0C\u5BF9\u6240\u6709jooq\u751F\u6548</li></ul><p><code>\u8BA1\u65F6</code>\u5728Wings\u4F53\u7CFB\u7684Context\u81EA\u52A8\u5F00\u542F\uFF0C\u4EE5\u8C03\u7528\u7684\u8BA1\u6570\u4E3A\u57FA\u7840\uFF0C\u8BA1\u6570\u4E3A0\u5219\u89C6\u4E3A\u7ED3\u675F\u3002 \u4E0D\u7BA1\u662F\u8FD0\u884C\u4E2D\u8FD8\u662F\u5DF2\u7ED3\u675F\uFF0C\u90FD\u53EF\u4EE5\u5728\u65E5\u5FD7\u4E2D\u8F93\u51FA\u5982\u4E0B\u7EDF\u8BA1\uFF0C\u9ED8\u8BA4\u4F1A\u81EA\u52A8\u5728\u7ED3\u675F\u65F6\u8F93\u51FA\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>+--s--ms------ns-+---%-+---------------+---------------
|  1,426,497,039 | 100 | thread        | task and timing 
|    922,167,066 |  64 | XNIO-4 task-1 | /test/watching.json
|    504,329,973 |  35 | wings-task-1  | AsyncWatch.BadSelect
|    504,059,463 |  35 | wings-task-1  | \xA6-AsyncWatch.BadSelect.sleep
|    663,100,505 |  46 | XNIO-4 task-1 | \xA6-WatchingService#normalFetch
|    128,767,339 |   9 | XNIO-4 task-1 | \xA6-\xA6-JooqSlowSql:SelectQueryImpl
|    213,964,147 |  14 | XNIO-4 task-1 | \xA6-WatchingService#errorFetch
|    199,774,730 |  14 | XNIO-4 task-1 | \xA6-\xA6-JooqSlowSql:SelectQueryImpl
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u7B2C1\u5217\u4E3A\u8017\u65F6\uFF0C\u6700\u591A999\u79D2\uFF0C\u7CBE\u786E\u5230ns</li><li>\u7B2C2\u5217\u4E3A\u5360\u6BD4\uFF0C\u4EE5\u767E\u5206\u6BD4\u663E\u793A\uFF0C\u57FA\u6570\u4E3Alevel0\u7684\u8017\u65F6\u4E4B\u548C</li><li>\u7B2C3\u5217\u4E3A\u7EBF\u7A0B\uFF0C\u8BA1\u65F6\u6240\u5728\u7684\u7EBF\u7A0B</li><li>\u7B2C4\u5217\u4E3A<code>\u533A\u95F4\u5173\u7CFB</code>\u53CA\u540D\u5B57\u5907\u6CE8\uFF0C\u7528\u4E8E\u5206\u6790\u8C03\u7528\u5173\u7CFB</li></ul><p><code>\u8BA1\u65F6</code>\u6309\u7167<code>\u5F00\u59CB\u65F6\u95F4</code>\u5230<code>\u7ED3\u675F\u65F6\u95F4</code>\u5F62\u6210<code>\u533A\u95F4\u5173\u7CFB</code>\uFF0C\u5E76\u4EE5\u6811\u72B6\u7ED3\u6784\u663E\u793A\uFF0C \u5728\u7EBF\u6027\u8C03\u7528\u4E2D\uFF0C<code>\u533A\u95F4\u5173\u7CFB</code>\u4E5F\u7B49\u4E8E\u6267\u884C\u5173\u7CFB\u3002\u4F46\u591A\u7EBF\u7A0B\u4E0B\u9700\u8981\u6309\u7EBF\u7A0B\u5206\u7C7B\u3002</p><h2 id="_4g-2-\u4F7F\u7528\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#_4g-2-\u4F7F\u7528\u65B9\u6CD5" aria-hidden="true">#</a> 4G.2.\u4F7F\u7528\u65B9\u6CD5</h2><p>\u9996\u5148\u8981\u5F00\u542Fwatching\u6A21\u5757\uFF0C\u4EE5\u4FBFWarlock\u81EA\u52A8\u914D\u7F6E\uFF0C\u7136\u540E\u8BBE\u7F6E\u5404\u4E2Athreshold\uFF0C\u975E\u8D1F\u65F6\u4E3A\u5F00\u542F\u3002</p><p>\u9ED8\u8BA4\u7684WebMvc\u4F53\u7CFB\u4E2D\uFF0C<code>Controller</code>\uFF0C<code>Service</code>\uFF0C<code>Database</code>\u5C5E\u4E8E\u5305\u542B\u5173\u7CFB\uFF0C \u56E0\u6B64\u7B80\u5355\u7684\u6162\u54CD\u5E94\u5206\u6790\uFF0C\u638C\u63A7Controller\u548CDatabase\u5373\u53EF\u3002</p><p>\u5047\u8BBE\uFF0C\u5728Controller\u5C42\u5B9A\u4E493\u79D2\u4E3A\u9608\u503C\uFF0C\u5728Database\u5C42\u5B9A\u4E49100ms\u4E3A\u9608\u503C\uFF0C\u76F4\u63A5\u8BBE\u7F6E\u914D\u7F6E\u5373\u53EF\u3002</p><p>\u5F53\u9700\u8981\u5BF9Service\u5C42\u7EDF\u8BA1\u65F6\uFF0C\u9700\u8981\u624B\u52A8\u4E3A\u9700\u8981\u5173\u6CE8\u7684\u65B9\u6CD5\u52A0\u4E0A<code>@Watching</code>\u6CE8\u89E3\u3002</p><h2 id="_4g-3-\u6CE8\u610F\u4E8B\u9879" tabindex="-1"><a class="header-anchor" href="#_4g-3-\u6CE8\u610F\u4E8B\u9879" aria-hidden="true">#</a> 4G.3.\u6CE8\u610F\u4E8B\u9879</h2><p>\u6B64\u529F\u80FD\u5177\u6709\u4E00\u5B9A\u7684\u5165\u4FB5\u6027\uFF0C\u4E3B\u8981\u5F00\u53D1\u8FC7\u7A0B\u4E2D\u7684\u8C03\u4F18\uFF0C\u5F53\u7EBF\u4E0A\u4EA7\u54C1\u5EFA\u8BAE\u5173\u95ED\uFF0C\u907F\u514D\u65E0\u610F\u4E49\u7684\u8D44\u6E90\u6D88\u8017\u3002</p>`,18),h={href:"https://github.com/alibaba/arthas",target:"_blank",rel:"noopener noreferrer"};function g(p,u){const i=n("ExternalLinkIcon");return l(),o("div",null,[s,e("p",null,[a("\u65E0\u5165\u4FB5\u7684\u52A8\u6001\u7684\u7A0B\u5E8F\u8BCA\u65AD\uFF0C\u63A8\u8350\u4F7F\u7528"),e("a",h,[a("Arthas"),t(i)])])])}const _=c(d,[["render",g],["__file","4g-watching.html.vue"]]);export{_ as default};
