import{_ as p}from"./_plugin-vue_export-helper.cdc0426e.js";import{r as l,o,c as i,b as n,e as s,d as e,f as t}from"./app.7f604d8d.js";const c={},r=t(`<h1 id="_9a2-\u8FC1\u79FB2-6-6-210\u624B\u518C" tabindex="-1"><a class="header-anchor" href="#_9a2-\u8FC1\u79FB2-6-6-210\u624B\u518C" aria-hidden="true">#</a> 9A2.\u8FC1\u79FB2.6.6.210\u624B\u518C</h1><p>build\u7248\u4ECE201\u5347\u7EA7210\uFF0C\u6709\u4EE5\u4E0B\u91CD\u70B9\u4E0D\u517C\u5BB9\u5F71\u54CD\u3002</p><ul><li>java\u4EE511\u53D6\u4EE38\uFF0C\u5176\u7F16\u8BD1\u53CA\u542F\u52A8\u53C2\u6570\u53D8\u5316</li><li>boot\u4EE52.6\u53D6\u4EE32.4\uFF0C\u5176webmvc\uFF0C\u8DEF\u5F84\u5339\u914D\u6709\u53D8</li><li>shardingsphere\u4EE55.1\u53D6\u4EE34.1\uFF0C\u5176\u7ED3\u6784\u66F4\u4F18</li><li>flywave\u4EE5<code>__</code>\u53D6\u4EE3<code>$</code>\u673A\u5236\uFF0C\u4EE5\u517C\u5BB9\u4E91db\u529F\u80FD</li><li>swagger\u4EE5springdoc\u53D6\u4EE3springfox\uFF0C\u4EE5\u517C\u5BB9boot2.6</li><li>fastjson\u66FF\u6362\u4E3Afastjson2</li></ul><h2 id="_9a2-1-\u4FEE\u6539pom-xml" tabindex="-1"><a class="header-anchor" href="#_9a2-1-\u4FEE\u6539pom-xml" aria-hidden="true">#</a> 9A2.1.\u4FEE\u6539pom.xml</h2><p>210\u5F00\u59CB\uFF0C\u6240\u6709artifactId\u5E76\u5165pro.fessional.wings\u7EC4\u5185\u3002 \u4EE5\u4E0B\u662Fparent\u548C\u666E\u901A\u4F9D\u8D56\u7684\u4FEE\u6539\u65B9\u6CD5\u3002</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- \u628A\u3010wings-project\u3011\u53D8\u4E3A\u3010wings\u3011--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- &lt;groupId&gt;pro.fessional&lt;/groupId&gt; --&gt;</span>
    <span class="token comment">&lt;!-- &lt;artifactId&gt;wings-project&lt;/artifactId&gt; --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>pro.fessional<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>wings<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.6.6.210-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- \u628A\u3010wings-\u3011\u4ECEartifactId \u53D8\u4E3A groupId\u7684\u3010.wings\u3011 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- &lt;groupId&gt;pro.fessional&lt;/groupId&gt; --&gt;</span>
  <span class="token comment">&lt;!-- &lt;artifactId&gt;wings-silencer&lt;/artifactId&gt; --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>pro.fessional.wings<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>silencer<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>\${wings.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_9a2-2-\u8FC1\u79FB\u5230java11" tabindex="-1"><a class="header-anchor" href="#_9a2-2-\u8FC1\u79FB\u5230java11" aria-hidden="true">#</a> 9A2.2.\u8FC1\u79FB\u5230java11</h2>`,7),d={href:"https://jdk.java.net/archive/",target:"_blank",rel:"noopener noreferrer"},u={href:"https://sdkman.io/",target:"_blank",rel:"noopener noreferrer"},k=n("code",null,"JDK8_HOME",-1),g=n("code",null,"JDK11_HOME",-1),m=t("<p>IDEA\u6216maven\u542F\u52A8java\u7A0B\u5E8F\u53CATestCast\u65F6\uFF0C\u9700\u8981\u54CD\u5E94\u7684\u589E\u52A0add-opens\u6216add-exports\u53C2\u6570</p><ul><li>maven-compiler-plugin - add-exports \u7F16\u8BD1</li><li>maven-surefire-plugin - add-opens \u8FD0\u884C</li><li>IDEA\u8FD0\u884CTestCase - \u81EA\u52A8\u83B7\u53D6surefire\u914D\u7F6E</li><li>IDEA\u8FD0\u884CJava\u548CBoot - \u624B\u5DE5\u8BBE\u7F6E\u542F\u52A8\u53C2\u6570\u6A21\u677F\uFF0C</li></ul><p>\u5176\u4E2D\u542F\u52A8\u53C2\u6570\u4E3A<code>${wings.java-opens}</code>\u5185\u5BB9\uFF0C\u4E0D\u63A8\u8350\u5168\u5C40\u53D8\u91CF\uFF0C\u5982JAVA_TOOL_OPTIONS\u3002 IDEA\u4E2D\u9700\u8981\u5728<code>Run/Debug Configuration Templates</code>\u4E2D\u5206\u522B\u8BBE\u7F6E<code>Application</code>\u548C<code>Spring Boot</code></p><p>\u53C2\u8003\u8D44\u6599</p>",4),v={href:"https://stackoverflow.com/questions/44056405",target:"_blank",rel:"noopener noreferrer"},b={href:"https://stackoverflow.com/questions/70196098",target:"_blank",rel:"noopener noreferrer"},h=t(`<h2 id="_9a2-3-\u65E5\u5FD7\u8868\u547D\u540D" tabindex="-1"><a class="header-anchor" href="#_9a2-3-\u65E5\u5FD7\u8868\u547D\u540D" aria-hidden="true">#</a> 9A2.3.\u65E5\u5FD7\u8868\u547D\u540D</h2><p>\u4E3B\u8981\u662Flog\u8868\uFF0C\u4ECEdollar\u53D8\u4E3Adouble underline\u4F53\u7CFB\uFF0Ctrigger\u540E\u7F00\u8868\u524D\u7F00\u3002</p><ul><li>log\u8868\u4ECE<code>table$log</code> \u53D8\u4E3A<code>table__</code></li><li>trigger\u4ECE<code>table$ai</code> \u53D8\u4E3A<code>ai__table</code></li></ul><p>\u64CD\u4F5C\u6B65\u9AA4\u5982\u4E0B\uFF0C</p><ul><li>\u6267\u884C JournalManager.manageTriggers(table, true) \u5220\u9664\u65E7trigger</li><li>\u6267\u884C JournalManager.checkAndInitDdl(table, cid) \u4EE5\u65B0\u914D\u7F6E\u66FF\u6362\u65E7\u914D\u7F6E</li><li>\u624B\u5DE5rename journal table</li><li>\u6267\u884C JournalManager.publishInsert/Update/Delete(table,true, cid) \u751F\u6210\u65B0trigger</li></ul><p>\u5982\u679C\u6570\u636E\u4E3Amysql8\uFF0C\u4E14\u7B26\u5408wings\u89C4\u8303\uFF0C\u53EF\u4EE5\u91C7\u7528\u4EE5\u4E0Bsql\u6D4B\u8BD5\u3002</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
  TABLE_NAME <span class="token keyword">as</span> TRACE_TBL<span class="token punctuation">,</span>
  <span class="token keyword">REPLACE</span><span class="token punctuation">(</span>TABLE_NAME<span class="token punctuation">,</span><span class="token string">&#39;$log&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> PLAIN_TBL<span class="token punctuation">,</span>
  CONCAT<span class="token punctuation">(</span><span class="token string">&#39;ALTER TABLE &#39;</span><span class="token punctuation">,</span>table_name<span class="token punctuation">,</span><span class="token string">&#39; RENAME TO &#39;</span><span class="token punctuation">,</span> <span class="token keyword">REPLACE</span><span class="token punctuation">(</span>table_name<span class="token punctuation">,</span> <span class="token string">&#39;$log&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;__&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&#39;;;&#39;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> RENAME_DDL
<span class="token keyword">FROM</span> INFORMATION_SCHEMA<span class="token punctuation">.</span><span class="token keyword">TABLES</span>
<span class="token keyword">WHERE</span> table_schema <span class="token operator">=</span> <span class="token keyword">DATABASE</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token operator">AND</span> table_name <span class="token operator">REGEXP</span> <span class="token string">&#39;\\\\$log&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">SELECT</span>
  TRIGGER_NAME <span class="token keyword">as</span> OLD_NAME<span class="token punctuation">,</span>
  REGEXP_REPLACE<span class="token punctuation">(</span>TRIGGER_NAME<span class="token punctuation">,</span><span class="token string">&#39;^(.+)\\\\$(.+)$&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;$2__$1&#39;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> NEW_NAME<span class="token punctuation">,</span>
  CONCAT<span class="token punctuation">(</span><span class="token string">&#39;DROP TRIGGER IF EXISTS &#39;</span><span class="token punctuation">,</span>TRIGGER_NAME<span class="token punctuation">,</span><span class="token string">&#39;;;&#39;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> DROP_DDL<span class="token punctuation">,</span>
  <span class="token keyword">REPLACE</span><span class="token punctuation">(</span>CONCAT<span class="token punctuation">(</span><span class="token string">&#39;CREATE TRIGGER \`&#39;</span><span class="token punctuation">,</span> REGEXP_REPLACE<span class="token punctuation">(</span>TRIGGER_NAME<span class="token punctuation">,</span><span class="token string">&#39;^(.+)\\\\$(.+)$&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;$2__$1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&#39;\` &#39;</span><span class="token punctuation">,</span>
    ACTION_TIMING<span class="token punctuation">,</span> <span class="token string">&#39; &#39;</span><span class="token punctuation">,</span> EVENT_MANIPULATION<span class="token punctuation">,</span> <span class="token string">&#39; ON \`&#39;</span><span class="token punctuation">,</span> EVENT_OBJECT_TABLE<span class="token punctuation">,</span> <span class="token string">&#39;\` FOR EACH ROW &#39;</span><span class="token punctuation">,</span>
    ACTION_STATEMENT<span class="token punctuation">,</span> <span class="token string">&#39;;;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&#39;$log&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;__&#39;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> CREATE_DDL
<span class="token keyword">FROM</span>
  INFORMATION_SCHEMA<span class="token punctuation">.</span>TRIGGERS
<span class="token keyword">WHERE</span>
  EVENT_OBJECT_SCHEMA <span class="token operator">=</span> <span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">--</span>
<span class="token keyword">DELIMITER</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token comment">-- \u590D\u5236\u4EE5\u4E0A DROP_DDL, RENAME_DDL, CREATE_DDL\uFF0C\u4F9D\u6B21\u6267\u884C\u5373\u53EF\u3002</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_9a2-4-lombok\u79FB\u9664var" tabindex="-1"><a class="header-anchor" href="#_9a2-4-lombok\u79FB\u9664var" aria-hidden="true">#</a> 9A2.4.lombok\u79FB\u9664var</h2><p>import lombok.var;</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">find</span> <span class="token builtin class-name">.</span> -type f -name <span class="token string">&#39;*.java&#39;</span> <span class="token operator">|</span> <span class="token keyword">while</span> <span class="token builtin class-name">read</span> -r fl<span class="token punctuation">;</span> <span class="token keyword">do</span>
<span class="token function">sed</span> -i <span class="token string">&#39;&#39;</span> -E <span class="token string">&#39;s/import lombok.var;//g&#39;</span> <span class="token variable">$fl</span>
<span class="token keyword">done</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_9a2-5-swagger3-0\u6CE8\u89E3" tabindex="-1"><a class="header-anchor" href="#_9a2-5-swagger3-0\u6CE8\u89E3" aria-hidden="true">#</a> 9A2.5.Swagger3.0\u6CE8\u89E3</h2>`,11),f={href:"https://springdoc.org/#migrating-from-springfox",target:"_blank",rel:"noopener noreferrer"},_=t(`<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u67E5\u770B swagger2\u7684\u6CE8\u89E3</span>
<span class="token function">find</span> <span class="token builtin class-name">.</span> -type f -name <span class="token string">&#39;*.java&#39;</span> <span class="token operator">|</span> <span class="token keyword">while</span> <span class="token builtin class-name">read</span> -r fl<span class="token punctuation">;</span> <span class="token keyword">do</span>
<span class="token function">grep</span> <span class="token string">&#39;import io.swagger.annotations&#39;</span> <span class="token variable">$fl</span> <span class="token operator">&gt;&gt;</span> /tmp/swagger.log
<span class="token keyword">done</span>
<span class="token function">sort</span> /tmp/swagger.log <span class="token operator">|</span> <span class="token function">uniq</span>
<span class="token function">rm</span> -f /tmp/swagger.log

<span class="token comment"># \u66FF\u6362\u5E38\u7528\u6807\u7B7E\uFF0C\u81EA\u884C\u4FEE\u6539\u683C\u5F0F\u504F\u5DEE\u5F15\u53D1\u7684\u7F16\u8BD1\u9519\u8BEF</span>
<span class="token function">find</span> <span class="token builtin class-name">.</span> -type f -name <span class="token string">&#39;*.java&#39;</span> <span class="token operator">|</span> <span class="token keyword">while</span> <span class="token builtin class-name">read</span> -r fl<span class="token punctuation">;</span> <span class="token keyword">do</span>
<span class="token function">sed</span> -i <span class="token string">&#39;&#39;</span> -E <span class="token string">&#39;s/import io.swagger.annotations.ApiModel;/import io.swagger.v3.oas.annotations.media.Schema;/g&#39;</span> <span class="token variable">$fl</span>
<span class="token function">sed</span> -i <span class="token string">&#39;&#39;</span> -E <span class="token string">&#39;s/import io.swagger.annotations.ApiModelProperty;/import io.swagger.v3.oas.annotations.media.Schema;/g&#39;</span> <span class="token variable">$fl</span>
<span class="token function">sed</span> -i <span class="token string">&#39;&#39;</span> -E <span class="token string">&#39;s/import io.swagger.annotations.Api;/import io.swagger.v3.oas.annotations.tags.Tag;/g&#39;</span> <span class="token variable">$fl</span>
<span class="token function">sed</span> -i <span class="token string">&#39;&#39;</span> -E <span class="token string">&#39;s/import io.swagger.annotations.ApiOperation;/import io.swagger.v3.oas.annotations.Operation;/g&#39;</span> <span class="token variable">$fl</span>

<span class="token function">sed</span> -i <span class="token string">&#39;&#39;</span> -E <span class="token string">&#39;s/@ApiModel\\((.*)\\)/@Schema(description = \\1)/g&#39;</span> <span class="token variable">$fl</span>
<span class="token function">sed</span> -i <span class="token string">&#39;&#39;</span> -E <span class="token string">&#39;s/@ApiModelProperty\\((.*)\\)/@Schema(description = \\1)/g&#39;</span> <span class="token variable">$fl</span>
<span class="token function">sed</span> -i <span class="token string">&#39;&#39;</span> -E <span class="token string">&#39;s/@Api\\((.*)\\)/@Tag(name = \\1)/g&#39;</span> <span class="token variable">$fl</span>
<span class="token function">sed</span> -i <span class="token string">&#39;&#39;</span> -E <span class="token string">&#39;s/@ApiOperation\\((.*)\\)/@Operation(summary = \\1)/g&#39;</span> <span class="token variable">$fl</span>
<span class="token keyword">done</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_9a2-6-\u5347\u7EA7mysql8-0" tabindex="-1"><a class="header-anchor" href="#_9a2-6-\u5347\u7EA7mysql8-0" aria-hidden="true">#</a> 9A2.6.\u5347\u7EA7mysql8.0</h2>`,2),E={href:"https://dev.mysql.com/doc/refman/8.0/en/upgrade-binary-package.html",target:"_blank",rel:"noopener noreferrer"},y={href:"https://dev.mysql.com/blog-archive/inplace-upgrade-from-mysql-5-7-to-mysql-8-0",target:"_blank",rel:"noopener noreferrer"},w={href:"https://dev.mysql.com/doc/mysql-shell/8.0/en/mysql-shell-utilities-upgrade.html",target:"_blank",rel:"noopener noreferrer"},A=t(`<p>wings\u5DE5\u7A0B\u4F7F\u7528jooq\uFF0C\u907F\u514D\u590D\u6742sql\uFF0C\u4EC5\u4E3Asql\u57FA\u672C\u529F\u80FD\uFF0C\u4E00\u822C\u65E0\u517C\u5BB9\u6027\u3002\u53EF\u4F7F\u7528mysql shell\u68C0\u67E5</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u65B9\u6CD5\u4E00\uFF0C\u9700\u8981\u5B89\u88C5 mysql shell</span>
mysqlsh -- util checkForServerUpgrade root@wings-sql-dev5:3306 --target-version<span class="token operator">=</span><span class="token number">8.0</span>.26 --output-format<span class="token operator">=</span>JSON
<span class="token comment"># \u65B9\u6CD5\u4E8C\uFF0C\u4F7F\u7528mysql-client 8.0</span>
mysqlcheck -u root -p --protocol<span class="token operator">=</span>tcp -h kite-sql-dev5 --all-databases --check-upgrade
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u539F\u5730\uFF08In-Place\uFF09\u5347\u7EA7\uFF0C\u5373\u4F7F\u75285.7\u7684\u539Fdata\u76EE\u5F55\uFF0C\u76F4\u63A5\u542F\u52A8mysql8\uFF0C\u5BF9\u5176\u6570\u636E\u7ED3\u6784\u81EA\u52A8\u8C03\u6574\u3002 \u7B80\u5355\u6570\u636E\u5E93\uFF08\u5355\u673A\uFF0C\u5355\u5BB9\u5668\uFF09\u63A8\u8350\u4F7F\u7528\uFF0C\u5982\u4F7F\u7528docker\u542F\u52A8mysql8.0\uFF0C\u6309\u4EE5\u4E0B2\u9879\uFF0C\u5373\u53EF\u81EA\u52A8\u5347\u7EA7\u3002</p><ul><li>\u5176data\u6307\u5411mysql5.7\u7684data\u3002</li><li>mysqld\u4E2D\u914D\u7F6Eupgrade=FORCE</li></ul><p>\u903B\u8F91\uFF08logical\uFF09\u5347\u7EA7\uFF0C\u6307\u5148dump\u5728restore\uFF0C\u590D\u6742\u6570\u636E\u5E93\uFF08\u4E91\uFF0C\u4E3B\u4ECE\uFF0C\u96C6\u7FA4\uFF09\u63A8\u8350\u4F7F\u7528\u3002 \u76F4\u63A5\u6062\u590D5.7\u7684FullDump\u52308.0\uFF0C\u9700\u8981\u8BBE\u7F6E<code>upgrade=FORCE</code>\u53C2\u6570\u7684\u6743\u9650\uFF0C\u4EE5\u5B8C\u5168\u6700\u540E\u5347\u7EA7\uFF0C \u5426\u5219\u4F1A\u51FA\u73B0\u7528\u6237\u80FD\u591F\u767B\u5F55\uFF0C\u4F46Access denied\u95EE\u9898\uFF0C\u4F7F\u652F\u6491\u7C7B\u7528\u6237\u548C\u529F\u80FD\u4E0D\u597D\u7528\u3002</p><p>\u56E0\u6B64\u5EFA\u8BAE\u5728\u6709mysql8 client\u7684\u673A\u5668\u4E0A\uFF0C\u5206\u522Bdump\u4E1A\u52A1\u7528\u6237\u548C\u4E1A\u52A1\u5E93\uFF0C\u7136\u540Erestore\u3002</p><ul><li>dump mysql5.7 \u4E1A\u52A1\u7528\u6237\uFF0C\u4E1A\u52A1\u5E93</li><li>restore mysql 8.0 \u5148\u7528\u6237\u518D\u5E93</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u751F\u6210\u914D\u7F6E\u6587\u4EF6</span>
<span class="token function">cat</span> <span class="token operator">&gt;&gt;</span>kite-sql.cnf<span class="token operator">&lt;&lt;</span> <span class="token string">EOF
[client]
protocol=tcp
port=3306
user=trydofor
password=moilioncircle
EOF</span>

<span class="token comment"># \u4F7F\u7528 mysqlpump\uFF0C\u4EE5\u652F\u6301\u66F4\u591A\u7684\u9009\u9879\uFF0C\u5168\u90E8\u4F7F\u7528mysql8\u7684client</span>
mysqlpump --defaults-extra-file<span class="token operator">=</span>kite-sql.cnf -h kite-sql-dev5 <span class="token punctuation">\\</span>
--all-databases --exclude-databases<span class="token operator">=</span>information_schema,mysql,performance_schema,sys <span class="token punctuation">\\</span>
--set-gtid-purged<span class="token operator">=</span>OFF <span class="token operator">&gt;</span> mysql-5.7-data.sql

mysqlpump --defaults-extra-file<span class="token operator">=</span>kite-sql.cnf -h kite-sql-dev5 <span class="token punctuation">\\</span>
--users --exclude-users<span class="token operator">=</span>root,%backup <span class="token punctuation">\\</span>
--exclude-databases<span class="token operator">=</span>% --set-gtid-purged<span class="token operator">=</span>OFF <span class="token operator">&gt;</span> mysql-5.7-user.sql

<span class="token builtin class-name">echo</span> <span class="token string">&quot;flush privileges;&quot;</span> <span class="token operator">&gt;&gt;</span> mysql-5.7-user.sql

<span class="token comment"># \u5982\u679Cdump\u662F\u6CA1\u6709\u5FFD\u7565innodb_*_status\uFF0C\u9700\u8981\u4F7F\u7528--force\u8DF3\u8FC7\u9519\u8BEF</span>
<span class="token function">cat</span> mysql-5.7-user.sql mysql-5.7-data.sql <span class="token punctuation">\\</span>
<span class="token operator">|</span> mysql --defaults-extra-file<span class="token operator">=</span>kite-sql.cnf -h kite-sql-dev
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_9a2-7-\u7834\u574F\u6027\u5F71\u54CD" tabindex="-1"><a class="header-anchor" href="#_9a2-7-\u7834\u574F\u6027\u5F71\u54CD" aria-hidden="true">#</a> 9A2.7.\u7834\u574F\u6027\u5F71\u54CD</h2><ul><li>wings-project\u4E0D\u5728\u4F9D\u8D56devtools\uFF0C\u4F30\u4EE5\u6B64\u4E3Aparent\u7684\u9879\u76EE\u9700\u8981\u81EA\u884Cdependency\u3002</li><li>warlock security\u7684url\u6743\u9650\u914D\u7F6E\uFF0C\u4ECEList\u53D8\u4E3AMap\uFF0C\u660E\u786E\u4E86\u7531\u5BBD\u677E\u5230\u4E25\u8C28\u7684\u8986\u76D6\u5173\u7CFB\u3002</li><li>mirana\u91CD\u5199DateLocaling\u65B9\u6CD5\u540D\uFF0C\u7F16\u8BD1\u9519\u8BEF\u65F6\uFF0C\u53EF\u4F9D\u9760\u53C2\u6570\u5217\u8868\uFF0C\u6279\u91CF\u66FF\u6362\u65B9\u6CD5\u540D\u3002</li><li>Warlock1SchemaManager \u91CD\u547D\u540D\u65B9\u6CD5</li><li>@JsonI18nString\u53D8\u4E3A@AutoI18nString</li></ul><h2 id="_9a2-8-jooqdao\u4E0D\u517C\u5BB9" tabindex="-1"><a class="header-anchor" href="#_9a2-8-jooqdao\u4E0D\u517C\u5BB9" aria-hidden="true">#</a> 9A2.8.JooqDao\u4E0D\u517C\u5BB9</h2><p>\u539F\u9759\u6001\u5F15\u7528\u7684\u65B9\u5F0F\u4E0D\u5EFA\u8BAE\u4F7F\u7528\u4E86\u3002</p><ul><li>val t = dao.getTable()</li><li>val a = dao.getAlias()</li></ul><p>\u63A8\u8350\u4EE5dao.getTable\u53CAgetAlias\u5B9A\u4E49\u5C40\u90E8\u53D8\u91CF\u53D6\u4EE3\u9759\u6001\u5168\u5C40\u8868 \u539Ffetch(Condition)\u7B7E\u540D\uFF0C\u53EF\u53D8\u4E3A\u4EE5\u4E0B\u5F62\u5F0F</p><ul><li>fetch(Table, Condition)</li><li>fetch(t -&gt; Fn.of(t.Id.eq(1L)))</li></ul><h2 id="_9a2-9-\u5916\u90E8api\u517C\u5BB9\u6027" tabindex="-1"><a class="header-anchor" href="#_9a2-9-\u5916\u90E8api\u517C\u5BB9\u6027" aria-hidden="true">#</a> 9A2.9.\u5916\u90E8Api\u517C\u5BB9\u6027</h2><ul><li><p>mysql8\u6CA1\u6709password\u51FD\u6570\uFF0C\u91C7\u7528\u4EE5\u4E0B\u7EC4\u5408\u66FF\u6362\u3002 SELECT CONCAT(&#39;*&#39;, UPPER(SHA1(UNHEX(SHA1(&#39;trydofor&#39;))))), password(&#39;trydofor&#39;);</p></li><li><p>java11\u4E2DDateTimeFormatter\u7684\u8C03\u6574\uFF0C\u5982 Offset X\u539F\u6765\u7684<code>XXX</code>\u4E0D\u80FD\u4EE3\u8868<code>XXXX</code>\u548C<code>XXXXX</code>\uFF0C\u4EE5\u6B64\u7C7B\u63A8\u3002</p></li><li><p>fastjson2\uFF0C\u5E94\u8BE5\u76F4\u63A5\u4EE5<code>com.alibaba.fastjson2.</code>\u66FF\u6362<code>com.alibaba.fastjson.</code>\u5373\u53EF\u3002 \u82E5\u5BF9fastjson\u4F9D\u8D56\u8FC7\u4E8E\u91CD\u548C\u590D\u6742\uFF0C\u8BF7\u52A1\u5FC5\u5BA1\u67E5\u5DE5\u7A0B\u8D28\u91CF\uFF0C\u786E\u8BA4\u7528\u6CD5\u5B89\u5168\u3002</p></li></ul><h2 id="_9a2-a-anthn\u62FC\u5199\u9519\u8BEF" tabindex="-1"><a class="header-anchor" href="#_9a2-a-anthn\u62FC\u5199\u9519\u8BEF" aria-hidden="true">#</a> 9A2.A.Anthn\u62FC\u5199\u9519\u8BEF</h2><p>\u901A\u8FC7Flywave\u6267\u884C<code>2021-09-18v01</code>\uFF0C\u4FEE\u590D<code>win_user_anthn</code>\u62FC\u5199\u9519\u8BEF</p><h3 id="\u6267\u884Csql\u811A\u672C" tabindex="-1"><a class="header-anchor" href="#\u6267\u884Csql\u811A\u672C" aria-hidden="true">#</a> \u6267\u884Csql\u811A\u672C</h3><p>\u5728\u672A\u5206\u8868\u4E14\u65E0\u5F71\u5B50\u8868\u65F6\uFF0C\u53EF\u624B\u52A8\u6267\u884C\u5347\u7EA7sql\u3002 \u5426\u5219\u5EFA\u8BAE\u4F7F\u7528flywave\u6267\u884C\uFF0C\u907F\u514D\u9057\u6F0F\u3002</p><ul><li>rename win_user_anthn</li><li>update sys_light_sequence</li><li>update shard table_#</li><li>update trace table$log</li><li>update triggers</li></ul><h3 id="\u66FF\u6362java\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u66FF\u6362java\u6587\u4EF6" aria-hidden="true">#</a> \u66FF\u6362java\u6587\u4EF6</h3><p>\u5168\u5DE5\u7A0B\u7684java\u6587\u4EF6\uFF0C\u66FF\u6362\u4EE5\u4E0B\u5B57\u7B26\u4E32</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sed</span> -i <span class="token string">&#39;s/user_anthn/user_authn/g&#39;</span>
<span class="token function">sed</span> -i <span class="token string">&#39;s/UserAnthn/UserAuthn/g&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_9a2-b-\u62C6\u5206warlockbond\u5DE5\u7A0B" tabindex="-1"><a class="header-anchor" href="#_9a2-b-\u62C6\u5206warlockbond\u5DE5\u7A0B" aria-hidden="true">#</a> 9A2.B.\u62C6\u5206WarlockBond\u5DE5\u7A0B</h2><p>\u7528\u6237\u6743\u9650\u7684\u9ED8\u8BA4\u6570\u636E\u5E93\u5B9E\u73B0\uFF0C\u62C6\u5206\u4E3Awarlock-bond\u5DE5\u7A0B\uFF0C</p><ul><li>\u4E0D\u9700\u8981\u6B64\u5B9E\u73B0\u7684\uFF0Cdependency warlock\uFF0C</li><li>\u5426\u5219\uFF0Cdependency warlock-bond</li></ul><p>\u540C\u65F6\u589E\u52A0<code>2020-10-23v01</code>\uFF0C\u4EE5\u6D88\u9664flywave-fit\u8B66\u62A5\u3002</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">IGNORE</span> <span class="token keyword">INTO</span> <span class="token identifier"><span class="token punctuation">\`</span>sys_schema_version<span class="token punctuation">\`</span></span> 
<span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">\`</span>revision<span class="token punctuation">\`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">\`</span>commit_id<span class="token punctuation">\`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">\`</span>apply_dt<span class="token punctuation">\`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">\`</span>comments<span class="token punctuation">\`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">\`</span>upto_sql<span class="token punctuation">\`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">\`</span>undo_sql<span class="token punctuation">\`</span></span><span class="token punctuation">)</span> 
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">2020102302</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&#39;&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_9a2-c-\u62C6\u5206codegen\u5DE5\u7A0B" tabindex="-1"><a class="header-anchor" href="#_9a2-c-\u62C6\u5206codegen\u5DE5\u7A0B" aria-hidden="true">#</a> 9A2.C.\u62C6\u5206CodeGen\u5DE5\u7A0B</h2><p>\u4EE3\u7801\u751F\u6210\u5DE5\u5177\uFF0C\u5206\u79BB\u4E3A\u72EC\u7ACB\u5DE5\u7A0B\uFF0C\u5206\u522B\u4E3Afaceless-jooqgen\u548Cwarlock-codegen\uFF0C \u5B9E\u9645\u4F7F\u7528\u4E2D\uFF0C\u76F4\u63A5\u4F9D\u8D56warlock-codegen\u5373\u53EF\uFF0C\u793A\u4F8Bmaven\u914D\u7F6E\u5982\u4E0B</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>pro.fessional.wings<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>warlock-codegen<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_9a2-d-\u591A\u56FD\u8BED\u529F\u80FD\u8C03\u6574" tabindex="-1"><a class="header-anchor" href="#_9a2-d-\u591A\u56FD\u8BED\u529F\u80FD\u8C03\u6574" aria-hidden="true">#</a> 9A2.D.\u591A\u56FD\u8BED\u529F\u80FD\u8C03\u6574</h2><p><code>sys_standard_i18n</code>\u4E2D<code>ukey</code>\u8BED\u4E49\u4E3A\uFF0C\u7EA6\u675F\u786E\u8BA4\u552F\u4E00\u6570\u636E\u6216enum\u7C7B\u5B9A\u4F4D\u6210\u5458</p><ul><li><code>id</code>\u7C7B\u578B - <code>id.</code> + id</li><li><code>code</code>\u7C7B\u578B - type + <code>.</code> + code</li><li>java\u7684enum\uFF0C\u5219\u4E3A\u5305\u540D\uFF0C\u7C7B\u540D\uFF0Cname\u6784\u6210</li></ul><p>\u4FEE\u6539\u5185\u5BB9\u5305\u62EC\uFF0C\u6570\u636E\u8BB0\u5F55\u548Ccodegen\u4EE3\u7801\u7684\u591A\u56FD\u8BED\u529F\u80FD\uFF0C</p><ul><li>\u66FF\u6362\u6570\u636E\uFF0C\u5982 2019-05-21v01-enum-i18n.sql</li><li>\u91CD\u65B0\u751F\u6210\u6A21\u677F\u4EE3\u7801\uFF0C\u5982 StandardLanguage</li></ul><h2 id="_9a2-e-\u914D\u7F6E\u5C5E\u6027\u7684\u53D8\u66F4" tabindex="-1"><a class="header-anchor" href="#_9a2-e-\u914D\u7F6E\u5C5E\u6027\u7684\u53D8\u66F4" aria-hidden="true">#</a> 9A2.E.\u914D\u7F6E\u5C5E\u6027\u7684\u53D8\u66F4</h2><h3 id="wings-monitor-79-properties" tabindex="-1"><a class="header-anchor" href="#wings-monitor-79-properties" aria-hidden="true">#</a> wings-monitor-79.properties</h3><ul><li><code>report-keyword</code> \u53D8\u4E3A <code>notice-keyword</code></li></ul>`,41);function q(I,T){const a=l("ExternalLinkIcon");return o(),i("div",null,[r,n("p",null,[s("\u5F53\u524D\u4F7F\u7528\u7684java11\u4E3A"),n("a",d,[s("openjdk build 11.0.2+9"),e(a)]),s("\uFF0C \u63A8\u8350\u4EE5"),n("a",u,[s("sdkman"),e(a)]),s("\u7BA1\u7406java8\u53CAjava11\u73AF\u5883\uFF0C\u5E76\u5728shell\u4E2D\u8BBE\u7F6E"),k,s("\u548C"),g,s("\u53D8\u91CF\u3002")]),m,n("ul",null,[n("li",null,[n("a",v,[s("What's the difference between --add-exports and --add-opens ..."),e(a)])]),n("li",null,[n("a",b,[s("How can I specify --add-opens from a project level ..."),e(a)])])]),h,n("p",null,[s("springdoc\u5168\u9762\u4F7F\u7528OpenApi/Swagger3.0\uFF0C\u56E0\u6B64springfox\u7684Swagger2.0\u6CE8\u89E3\u9700\u8981\u66FF\u6362 \u5177\u4F53\u7EC6\u8282\u53C2\u8003 "),n("a",f,[s("https://springdoc.org/#migrating-from-springfox"),e(a)])]),_,n("ul",null,[n("li",null,[n("a",E,[s("\u5148\u5168\u5907\u518D\u6062\u590D Logical Upgrade"),e(a)])]),n("li",null,[n("a",y,[s("\u539F\u5730data\u5347\u7EA7 In-Place Upgrade"),e(a)])]),n("li",null,[n("a",w,[s("\u68C0\u67E5\u5DE5\u5177 mysql shell"),e(a)])])]),A])}const O=p(c,[["render",q],["__file","9a2.266-210.html.vue"]]);export{O as default};
