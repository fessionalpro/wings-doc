import{_ as o}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as i,o as t,c as l,b as e,e as a,d as s,f as r}from"./app-D49wbIsR.js";const p={},c=e("h1",{id:"_9b5-配置中的绑定",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#_9b5-配置中的绑定"},[e("span",null,"9B5.配置中的绑定")])],-1),d=e("p",null,"列出 ConfigurationProperties 中常见的属性绑定事项。",-1),u={href:"https://docs.spring.io/spring-boot/docs/3.0.3/reference/htmlsingle/#features.external-config.typesafe-configuration-properties",target:"_blank",rel:"noopener noreferrer"},m=r(`<h2 id="_9b5-1-普通pojo的javabean" tabindex="-1"><a class="header-anchor" href="#_9b5-1-普通pojo的javabean"><span>9B5.1.普通Pojo的JavaBean</span></a></h2><ul><li>基本类型字段，如果希望null，则使用包装类</li><li>空构造函数，和良好的getters/setters规范</li><li>以下类型，非immutable时，可以省略setter <ul><li>Map 推荐new，可用emptyMap，不推荐null</li><li>Collection，推荐new，可用emptySet等，不推荐null</li><li>Array，推荐new，不推荐null</li><li>nested POJO，推荐new，不推荐null</li></ul></li><li>以上不推荐null是因为wings主张NotNull和默认值</li><li>不推荐 @ConstructorBinding</li></ul><h2 id="_9b5-2-第三方类的配置" tabindex="-1"><a class="header-anchor" href="#_9b5-2-第三方类的配置"><span>9B5.2.第三方类的配置</span></a></h2><p>不能够或不方便直接@ConfigurationProperties的类，配合@Bean注解。</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;another&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">AnotherComponent</span> <span class="token function">anotherComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AnotherComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_9b5-3-属性名的风格" tabindex="-1"><a class="header-anchor" href="#_9b5-3-属性名的风格"><span>9B5.3.属性名的风格</span></a></h2><p>尽管spring支持宽松匹配，包括，</p><ul><li>kebab - my.main-project.person.first-name</li><li>camel - my.main-project.person.firstName</li><li>underscore - my.main-project.person.first_name</li><li>UPPER - MY_MAINPROJECT_PERSON_FIRSTNAME</li></ul><p>Wings中，配置文件使用properties，推荐全小写的kebab， 而环境变量，推荐全大写的UPPER。</p><p>环境变量的规则为，①以<code>_</code>替换<code>.</code>，②移除<code>-</code>，③全大写</p><ul><li><code>spring.main.log-startup-info</code> - <code>SPRING_MAIN_LOGSTARTUPINFO</code></li><li><code>my.service[0].other</code> - <code>MY_SERVICE_0_OTHER</code></li></ul><h2 id="_9b5-4-map属性的格式" tabindex="-1"><a class="header-anchor" href="#_9b5-4-map属性的格式"><span>9B5.4.Map属性的格式</span></a></h2><p>绑定<code>my.map</code>到<code>Map&lt;String,String&gt;</code>属性，以下为key关系</p><ul><li><code>key1</code> - <code>my.map.key1=value1</code></li><li><code>/key2</code> - <code>my.map.[/key2]=value2</code></li><li><code>key3</code> - <code>my.map./key3=value3</code></li><li><code>a.b</code> - <code>my.map.a.b=value4</code></li></ul><p>Spring支持<code>scalar</code>值，包括<code>enum</code>, <code>java.lang.*</code>（Object除外）， 可以不用<code>[]</code>，如<code>a.b</code>示例，及<code>spring.mail.properties.mail.debug</code></p><p>但Wings推荐，</p><ul><li>不易混淆的key可直接使用，否则都建议使用<code>[]</code></li><li>spring体系内，以spring为主，如spring.mail</li></ul><h2 id="_9b5-5-属性合并与覆盖" tabindex="-1"><a class="header-anchor" href="#_9b5-5-属性合并与覆盖"><span>9B5.5.属性合并与覆盖</span></a></h2><p>当属性存在于多份配置文件时，集合类为全覆盖，键值对为合并</p><ul><li>Array/List/Set - 不会合并，以优先级高的文件内容全覆盖</li><li>Map/Pojo - 会合并，以优先级覆盖key</li></ul><h2 id="_9b5-6-时间段duration和period" tabindex="-1"><a class="header-anchor" href="#_9b5-6-时间段duration和period"><span>9B5.6.时间段Duration和Period</span></a></h2><p>spring对java.time.Duration和Period进行了实用性扩展，单位<code>全小写</code></p><ul><li><p><code>@DurationUnit</code> 默认milliseconds</p></li><li><p><code>us</code> - microseconds</p></li><li><p><code>ms</code> - milliseconds, <code>PT0.5S</code>等于<code>500ms</code></p></li><li><p><code>s</code> - seconds</p></li><li><p><code>m</code> - minutes</p></li><li><p><code>h</code> - hours</p></li><li><p><code>d</code> - days</p></li><li><p><code>@PeriodUnit</code> 默认 days</p></li><li><p><code>y</code> - years</p></li><li><p><code>m</code> - months</p></li><li><p><code>w</code> - weeks</p></li><li><p><code>d</code> - days</p></li></ul><h2 id="_9b5-7-数据大小-datasize" tabindex="-1"><a class="header-anchor" href="#_9b5-7-数据大小-datasize"><span>9B5.7.数据大小 DataSize</span></a></h2><p>单位<code>全大写</code></p><ul><li><code>@DataSizeUnit</code> 默认bytes</li><li>&#39;B&#39; - bytes</li><li>&#39;KB&#39; - kilobytes</li><li>&#39;MB&#39; - megabytes</li><li>&#39;GB&#39; - gigabytes</li><li>&#39;TB&#39; - terabytes</li></ul><h2 id="_9b5-8-和-value的区别" tabindex="-1"><a class="header-anchor" href="#_9b5-8-和-value的区别"><span>9B5.8.和@Value的区别</span></a></h2><ul><li>@ConfigurationProperties - 宽松绑定(Relaxed binding)，不支持SpEL</li><li>@Value - 仅<code>kebab</code>格式可宽松绑定，支持SpEL</li></ul><p>关键@Value不支持type-safe的prefix形式的复杂类型注入，仅单key，简单类型。</p>`,29);function b(h,g){const n=i("ExternalLinkIcon");return t(),l("div",null,[c,d,e("p",null,[a("参考资料为"),e("a",u,[a("Type-safe Configuration Properties"),s(n)])]),m])}const f=o(p,[["render",b],["__file","9b5.prop-bind.html.vue"]]),k=JSON.parse('{"path":"/zh/9-example/9b.spring-boot/9b5.prop-bind.html","title":"9B5.配置中的绑定","lang":"zh-CN","frontmatter":{"isOriginal":true,"icon":"leaf","category":["实战","属性"],"description":"9B5.配置中的绑定 列出 ConfigurationProperties 中常见的属性绑定事项。 参考资料为Type-safe Configuration Properties 9B5.1.普通Pojo的JavaBean 基本类型字段，如果希望null，则使用包装类 空构造函数，和良好的getters/setters规范 以下类型，非immutabl...","GIT_REPO_HEAD":"2024-05-14 c11179d9405d56bdce1d844167180312da5251a8","head":[["link",{"rel":"alternate","hreflang":"en-us","href":"https://wings.fessional.pro/9-example/9b.spring-boot/9b5.prop-bind.html"}],["meta",{"property":"og:url","content":"https://wings.fessional.pro/zh/9-example/9b.spring-boot/9b5.prop-bind.html"}],["meta",{"property":"og:site_name","content":"WingsBoot 纹丝不忒"}],["meta",{"property":"og:title","content":"9B5.配置中的绑定"}],["meta",{"property":"og:description","content":"9B5.配置中的绑定 列出 ConfigurationProperties 中常见的属性绑定事项。 参考资料为Type-safe Configuration Properties 9B5.1.普通Pojo的JavaBean 基本类型字段，如果希望null，则使用包装类 空构造函数，和良好的getters/setters规范 以下类型，非immutabl..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:locale:alternate","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2023-06-18T08:37:26.000Z"}],["meta",{"property":"article:author","content":"trydofor"}],["meta",{"property":"article:modified_time","content":"2023-06-18T08:37:26.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"9B5.配置中的绑定\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2023-06-18T08:37:26.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"trydofor\\",\\"url\\":\\"https://www.trydofor.com\\"}]}"]]},"headers":[{"level":2,"title":"9B5.1.普通Pojo的JavaBean","slug":"_9b5-1-普通pojo的javabean","link":"#_9b5-1-普通pojo的javabean","children":[]},{"level":2,"title":"9B5.2.第三方类的配置","slug":"_9b5-2-第三方类的配置","link":"#_9b5-2-第三方类的配置","children":[]},{"level":2,"title":"9B5.3.属性名的风格","slug":"_9b5-3-属性名的风格","link":"#_9b5-3-属性名的风格","children":[]},{"level":2,"title":"9B5.4.Map属性的格式","slug":"_9b5-4-map属性的格式","link":"#_9b5-4-map属性的格式","children":[]},{"level":2,"title":"9B5.5.属性合并与覆盖","slug":"_9b5-5-属性合并与覆盖","link":"#_9b5-5-属性合并与覆盖","children":[]},{"level":2,"title":"9B5.6.时间段Duration和Period","slug":"_9b5-6-时间段duration和period","link":"#_9b5-6-时间段duration和period","children":[]},{"level":2,"title":"9B5.7.数据大小 DataSize","slug":"_9b5-7-数据大小-datasize","link":"#_9b5-7-数据大小-datasize","children":[]},{"level":2,"title":"9B5.8.和@Value的区别","slug":"_9b5-8-和-value的区别","link":"#_9b5-8-和-value的区别","children":[]}],"git":{"createdTime":1687077446000,"updatedTime":1687077446000,"contributors":[{"name":"trydofor","email":"trydofor@gmail.com","commits":1}]},"readingTime":{"minutes":1.87,"words":562},"filePathRelative":"zh/9-example/9b.spring-boot/9b5.prop-bind.md","localizedDate":"2023年6月18日","autoDesc":true}');export{f as comp,k as data};
