import{_ as i,W as u,X as d,Z as n,a0 as a,$ as s,a3 as p,a2 as t,F as o}from"./framework-f37db9b8.js";const r={},g=n("h1",{id:"_9a4-升迁3-0-2-300手册",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_9a4-升迁3-0-2-300手册","aria-hidden":"true"},"#"),a(" 9A4.升迁3.0.2.300手册")],-1),k=n("p",null,"build版从210升级220，有以下重点不兼容影响。",-1),m=n("li",null,[a("java "),n("code",null,"17"),a(" 取代 "),n("code",null,"11")],-1),v=n("li",null,[a("EE更名，以"),n("code",null,"jakarta"),a("取代 "),n("code",null,"javax")],-1),h=n("code",null,"3.0",-1),_=n("code",null,"2.7",-1),b={href:"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Release-Notes",target:"_blank",rel:"noopener noreferrer"},f=t(`<h2 id="_9a4-1-修改pom-xml" tabindex="-1"><a class="header-anchor" href="#_9a4-1-修改pom-xml" aria-hidden="true">#</a> 9A4.1.修改pom.xml</h2><p>version变为<code>3.0.2.300-SNAPSHOT</code></p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>pro.fessional<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>wings<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.0.2.300-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_9a4-2-依赖变更pom-xml" tabindex="-1"><a class="header-anchor" href="#_9a4-2-依赖变更pom-xml" aria-hidden="true">#</a> 9A4.2.依赖变更pom.xml</h2>`,4),x={id:"git-commit-id-plugin",tabindex:"-1"},j=n("a",{class:"header-anchor",href:"#git-commit-id-plugin","aria-hidden":"true"},"#",-1),I={href:"https://github.com/git-commit-id/git-commit-id-maven-plugin",target:"_blank",rel:"noopener noreferrer"},A=t(`<div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>pl.project13.maven<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>git-commit-id-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- ↑↑变更前↑↑，↓↓变更后↓↓ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.github.git-commit-id<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>git-commit-id-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1),y={id:"springdoc",tabindex:"-1"},w=n("a",{class:"header-anchor",href:"#springdoc","aria-hidden":"true"},"#",-1),S={href:"https://springdoc.org/v2/",target:"_blank",rel:"noopener noreferrer"},E=t(`<div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springdoc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>springdoc-openapi-ui<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springdoc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>springdoc-openapi-javadoc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- ↑↑变更前↑↑，↓↓变更后↓↓ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springdoc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>springdoc-openapi-starter-webmvc-ui<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// import org.springdoc.api.annotations.ParameterObject;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springdoc<span class="token punctuation">.</span>core<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ParameterObject</span></span><span class="token punctuation">;</span>
<span class="token comment">// import org.springdoc.core.SpringDocConfiguration;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springdoc<span class="token punctuation">.</span>core<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span></span><span class="token class-name">SpringDocConfiguration</span></span><span class="token punctuation">;</span>
<span class="token comment">// import org.springdoc.core.SpringDocUtils;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springdoc<span class="token punctuation">.</span>core<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">SpringDocUtils</span></span><span class="token punctuation">;</span>
<span class="token comment">// import org.springdoc.core.customizers.OpenApiCustomiser;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springdoc<span class="token punctuation">.</span>core<span class="token punctuation">.</span>customizers<span class="token punctuation">.</span></span><span class="token class-name">OpenApiCustomizer</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_9a4-3-javax-to-jakarta-namespace" tabindex="-1"><a class="header-anchor" href="#_9a4-3-javax-to-jakarta-namespace" aria-hidden="true">#</a> 9A4.3.javax to jakarta namespace</h2><p>IDEA提供了迁移功能 <code>Refactor</code>/<code>Migrate Packages and Classes</code>/<code>JavaEE to JakartaEE</code></p><p>springboot3生态下，已完成了namespace的变更。wings主要涉及以下</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name"><span class="token namespace">jakarta<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span>PostConstruct</span><span class="token punctuation">;</span>
jakarta<span class="token punctuation">.</span>mail<span class="token punctuation">.</span>*
jakarta<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>*
jakarta<span class="token punctuation">.</span>validation<span class="token punctuation">.</span>*
jakarta<span class="token punctuation">.</span>xml<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>*
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意并非所以javax名词空间下都需要替换，有些为间接依赖，可并存，findbug等</p><h2 id="_9a4-4-重做autogen" tabindex="-1"><a class="header-anchor" href="#_9a4-4-重做autogen" aria-hidden="true">#</a> 9A4.4.重做Autogen</h2>`,8),N=n("p",null,"因已关闭JPA注解，现涉及的javax注解如下",-1),P=n("ul",null,[n("li",null,"javax.annotation.processing.Generated (JDK 9+)"),n("li",null,"javax.annotation.Generated (JDK 😎")],-1),C=n("h2",{id:"_9a4-5-add-modules及add-opens",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_9a4-5-add-modules及add-opens","aria-hidden":"true"},"#"),a(" 9A4.5.add-modules及add-opens")],-1),D=n("code",null,"--illegal-access=deny",-1),O=n("code",null,"add-opens",-1),L={href:"http://xn--wingsstarter-0v43a.sh",target:"_blank",rel:"noopener noreferrer"},B=t('<p>已知IDEA中，执行<code>Whole project</code>测试时，未引用surefire的<code>argLine</code>。 其结果是，部分使用反射个功能的测试用例失败。解决办法如下，</p><ul><li>以模块为单位执行，会正确设置<code>argLine</code></li><li>全工程时，需要自行指定<code>add-opens</code>，内容参考<code>argLine</code>。</li></ul><h2 id="_9a4-6-java17的语法特征调整" tabindex="-1"><a class="header-anchor" href="#_9a4-6-java17的语法特征调整" aria-hidden="true">#</a> 9A4.6.java17的语法特征调整</h2>',3),J=n("ul",null,[n("li",null,[a("PatternVariable替换类型强转 "),n("code",null,"instanceof final G g")]),n("li",null,[a("加强版的switch，以箭头表示 "),n("code",null,"case gg -> ;")]),n("li",null,[a("text block 替换字符串拼接 "),n("code",null,'""" """')])],-1),R=t('<ul><li>record - 出小类外，尽量用lombok，拥有更多特性和扩展性</li></ul><h2 id="_9a4-7-重要的直接依赖" tabindex="-1"><a class="header-anchor" href="#_9a4-7-重要的直接依赖" aria-hidden="true">#</a> 9A4.7.重要的直接依赖</h2><ul><li>mirana 2.4.0-SNAPSHOT → 2.4.4-SNAPSHOT</li><li>springdoc 1.6.14 → 2.0.2 <ul><li>org.springdoc:springdoc-openapi-starter-webmvc-ui</li></ul></li><li>boot-admin 2.7.10 → 3.0.0</li><li>sentry 6.12.1 → 6.13.0 <ul><li>sentry-spring-boot-starter-jakarta</li></ul></li><li>flatten-maven-plugin 1.2.7 → 1.3.0</li></ul>',3);function T(V,H){const e=o("ExternalLinkIcon"),l=o("RouterLink"),c=o("Badge");return u(),d("div",null,[g,k,n("ul",null,[m,v,n("li",null,[a("boot以"),h,a("取代"),_,a("，"),n("a",b,[a("Release Notes"),s(e)])])]),f,n("h3",x,[j,a(),n("a",I,[a("git-commit-id-plugin"),s(e)])]),A,n("h3",y,[w,a(),n("a",S,[a("springdoc"),s(e)])]),E,n("p",null,[a("参考"),s(l,{to:"/9-example/9a.wings-change/9a3.277-220.html"},{default:p(()=>[a("277.220")]),_:1}),a("升级手册。")]),N,P,C,n("p",null,[a("java17中"),D,a("，未"),O,a("会运行时错误。 "),n("a",L,[a("wings的starter.sh"),s(e)]),a("，pom.xml，进行了正确设定，可以直接使用。")]),B,n("p",null,[a("java17提供了比较舒服的语法特征，"),s(c,{type:"tip",vertical:"top"},{default:p(()=>[a("建议")]),_:1}),a("调整")]),J,n("p",null,[a("以下特征"),s(c,{type:"note",vertical:"top"},{default:p(()=>[a("不建议")]),_:1}),a("调整")]),R])}const G=i(r,[["render",T],["__file","9a4.302-300.html.vue"]]);export{G as default};
