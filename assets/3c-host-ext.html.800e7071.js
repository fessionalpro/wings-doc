import{_ as s}from"./_plugin-vue_export-helper.cdc0426e.js";import{o as e,c as n,f as o}from"./app.75a6264a.js";const a={},i=o(`<h1 id="_3c-host\u7EE7\u627F\u548Curl\u91CD\u8F7D" tabindex="-1"><a class="header-anchor" href="#_3c-host\u7EE7\u627F\u548Curl\u91CD\u8F7D" aria-hidden="true">#</a> 3C.Host\u7EE7\u627F\u548CURL\u91CD\u8F7D</h1><p>\u57FA\u4E8EMvc\u7279\u6027\u5B9E\u73B0\u4E86Host\u7684\u5957\u58F3\u6362\u80A4\u529F\u80FD\u3002\u4E0D\u540C\u4E8E\u53CD\u5411\u4EE3\u7406(nginx)\u7684rewrite\uFF0C</p><ul><li>extend - \u5B50domain\u62E5\u6709\u7236domain\u7684\u5168\u90E8URL</li><li>override - \u5B50domain\u53EF\u4EE5override\u7236domain\u7684URL</li><li>\u5B50domain\u6709\u81EA\u5DF1\u72EC\u7ACB\u7684URL</li><li>domain\u7684\u7EE7\u627F\u57FA\u4E8Ehost</li></ul><h2 id="_3c-1-\u573A\u666F\u4E3E\u4F8B" tabindex="-1"><a class="header-anchor" href="#_3c-1-\u573A\u666F\u4E3E\u4F8B" aria-hidden="true">#</a> 3C.1.\u573A\u666F\u4E3E\u4F8B</h2><p>\u5047\u8BBE<code>a.com</code>\u662F\u4E00\u4E2A\u6709\u5B8C\u6574\u7684\u529F\u80FDdomain\uFF0C\u4E3E\u4F8B\u5305\u62EC\u4EE5\u4E0B3\u4E2AURL</p><ul><li>GET /user-list.json - \u57FA\u4E8EController</li><li>GET /css/main.css - \u9759\u6001\u8D44\u6E90</li><li>GET /login.html - \u57FA\u4E8EController</li></ul><p>\u6B64\u65F6\uFF0C\u6765\u4E2A\u52A0\u76DF\u5546<code>b.com</code>\uFF0C\u9664\u4E86\u76AE\u80A4\uFF0C\u9876\u7EA7\u57DF\u540D\u5916\uFF0C\u90FD\u548C<code>a.com</code>\u4E00\u6837\u3002 \u518D\u540E\u6765\uFF0C<code>b.com</code>\u6709\u4E86\u81EA\u5DF1\u7684\u9700\u6C42\uFF0C\u90E8\u5206\u754C\u9762\u548Curl\u548C<code>a.com</code>\u7684\u9700\u6C42\u5206\u53C9\u4E86\u3002 \u4E0D\u540C\u7684\u529F\u80FD\u81EA\u5DF1\u5B9E\u73B0\uFF0C\u653E\u5728\u7EA6\u5B9A\u7684prefix\u4E0B\uFF0C\u6B64\u65F6URL\u5206\u5E03\u5982\u4E0B\uFF0C</p><ul><li>GET /login.html - <code>a.com</code>(\u7236)\uFF0C<code>b.com</code>(\u5B50)</li><li>GET /user-list.json - <code>a.com</code>(\u7236)</li><li>GET /css/main.css - <code>a.com</code>(\u7236)</li><li>GET /domain/b/user-list.json - <code>b.com</code>(\u5B50)</li><li>GET /domain/b/css/main.css - <code>b.com</code>(\u5B50)</li></ul><p>\u5F53\u7528\u6237\u8BBF\u95EE\u4EE5\u4E0BURL\u65F6\uFF0C\u6309\u7167java\u7684\u7236\u5B50\u7C7Boverride\u89C4\u5219\uFF0C\u8C03\u7528\u5982\u4E0B\uFF0C</p><ul><li><code>a.com/login.html</code> - /login.html(\u7236)</li><li><code>a.com/user-list.json</code> - /user-info.list(\u7236)</li><li><code>a.com/css/main.css</code> - /css/main.css(\u7236)</li><li><code>b.com/login.html</code> - /login.html(\u7236)</li><li><code>b.com/user-list.json</code> - /domain/b/user-list.json(\u5B50)</li><li><code>b.com/css/main.css</code> - /domain/b/css/main.css(\u5B50)</li></ul><p>\u5B9E\u9645\u9879\u76EE\u4E2D\uFF0C\u4EE5\u4E0A\u573A\u666F\u591A\u53D1\u751F\u5728resource\u548Ccontroller\u7684Mapping\u4E2D\u3002</p><ul><li>resource\u901A\u5E38\u6709<code>**</code>\u5339\u914D\uFF0C\u7528\u53CD\u5C04ResourceHttpRequestHandler.getResource\u68C0\u67E5</li><li>\u82E5\u975EResourceHttpRequestHandler\u4E14match<code>**</code>\uFF0C\u9700\u8981\u81EA\u5DF1\u8BBE\u6CD5\u68C0\u67E5\u8D44\u6E90\u662F\u5426\u5B58\u5728</li><li>\u6682\u65F6\u4E0D\u652F\u6301viewTemplate\uFF0C\u540C\u65F6\u4E5F\u7EA6\u5B9A\u6A21\u677F\u5FC5\u987B\u4F7F\u7528\u5168\u8DEF\u5F84</li></ul><p>\u6839\u636Ewings mapping\u7EA6\u5B9A\uFF0C\u907F\u514D\u4F7F\u7528\u76F8\u5BF9\u8DEF\u5F84\uFF0C\u6240\u4EE5\uFF0Cb.com\u8981\u5728\u5728class\u7EA7\u505A\u524D\u7F00</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Controller</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/domain/b&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>
 
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/user-info.json&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">fetchUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u4E0D\u652F\u6301view\uFF0C\u9700\u8981\u624B\u52A8\u6307\u5B9A</span>
        <span class="token keyword">return</span> <span class="token string">&quot;/domain/b/user-info&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3c-2-\u5B9E\u73B0\u539F\u7406" tabindex="-1"><a class="header-anchor" href="#_3c-2-\u5B9E\u73B0\u539F\u7406" aria-hidden="true">#</a> 3C.2.\u5B9E\u73B0\u539F\u7406</h2><p>\u5728SpringMvc\u4F53\u7CFB\u4E2D\uFF0C\u4E00\u4E2A\u8BF7\u6C42\u8FDB\u5165servlet\u5BB9\u5668\u540E\uFF0C\u5728worker\u7EBF\u7A0B\u4E2D</p><ul><li>Filter#doFilter <code>before</code> chain.doFilter</li><li>DispatcherServlet#doService <code>call</code> doDispatch</li><li>Filter#doFilter <code>after</code> chain.doFilter</li></ul><p>wings\u901A\u8FC7WingsDomainFilter\uFF0C\u5148\u68C0\u67E5host\uFF0C\u5982\u679C\u662F\u7EE7\u627F\u57DF\uFF0C\u5219\u6784\u9020\u5B50\u57DF\u5168\u8DEF\u5F84url\uFF0C<br> \u901A\u8FC7\u68C0\u67E5\u7F13\u5B58\u548CDispatchServlet\u4E2D\u7684HandlerMapping\u518D\u6784\u9020RequestWrapper\u3002</p><p>\u6BD4\u5982\u7528\u6237\u8BBF\u95EE\u7684URL\u4E3A /user/login.json\uFF0C\u5047\u8BBE\u6EE1\u8DB3domain\u7EE7\u627F\uFF0Chost\u4E3Atrydofor\uFF0C \u5728\u670D\u52A1\u5668\u7AEF\u5B9E\u9645\u8BBF\u95EE\u7684\u8D44\u6E90\u662F/prefix/trydofor/user/login.json</p><p>\u5373\u589E\u52A0\u4E86<code>/\${prefix}/\${host}</code>\u7684\u8DEF\u5F84\u5728\u5BA2\u6237\u8BBF\u95EEURI\u524D\u3002\u77E5\u8BC6\u70B9\u6269\u5C55\uFF0C</p><ul><li>\u5728FilterChain.doFilter\u8C03\u7528\u4E4B\u524DRequest\u53EF\u7528\uFF0C\u800C\u5176\u540EResponse\u53EF\u7528\u7684\uFF0C\u6CE8\u610F\u7EBF\u7A0B\u5B89\u5168\u548C\u6027\u80FD</li><li>\u9ED8\u8BA4\u9759\u6001\u8D44\u6E90\u5728classpath\u4E2D\u7684 <code>/static</code>, <code>/public</code>, <code>/resources</code>, <code>/META-INF/resources</code></li></ul>`,21),c=[i];function l(t,d){return e(),n("div",null,c)}const u=s(a,[["render",l],["__file","3c-host-ext.html.vue"]]);export{u as default};
