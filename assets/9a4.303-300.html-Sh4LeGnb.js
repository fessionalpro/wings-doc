import{_ as h}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r,c as p,b as i,d as s,f as a,w as e,e as n,o as d}from"./app-DEdToB0k.js";const o={},k=i("h1",{id:"_9a4-upgrade-3-0-3-300",tabindex:"-1"},[i("a",{class:"header-anchor",href:"#_9a4-upgrade-3-0-3-300"},[i("span",null,"9A4.Upgrade 3.0.3.300")])],-1),c=i("p",null,"Upgraded build to 300 with the following major incompatibility,",-1),g=n('<li>java <code>17</code> instead of <code>11</code></li><li>EE rename, <code>jakarta</code> instead of <code>javax</code></li><li>boot <code>3.0</code> instead of <code>2.7</code>, <a href="https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Release-Notes" target="_blank" rel="noopener noreferrer">Release Notes</a></li>',3),B=n(`<h2 id="_9a4-1-modify-pom-xml" tabindex="-1"><a class="header-anchor" href="#_9a4-1-modify-pom-xml"><span>9A4.1.Modify pom.xml</span></a></h2><p>change version to <code>3.0.3.300-SNAPSHOT</code></p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" data-title="xml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">parent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;pro.fessional&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;wings&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">version</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;3.0.3.300-SNAPSHOT&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">version</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">parent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_9a4-2-dependency-change" tabindex="-1"><a class="header-anchor" href="#_9a4-2-dependency-change"><span>9A4.2.Dependency Change</span></a></h2><h3 id="_2a-git-commit-id-plugin" tabindex="-1"><a class="header-anchor" href="#_2a-git-commit-id-plugin"><span>2a.<a href="https://github.com/git-commit-id/git-commit-id-maven-plugin" target="_blank" rel="noopener noreferrer">git-commit-id-plugin</a></span></a></h3><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" data-title="xml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">plugin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;pl.project13.maven&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;git-commit-id-plugin&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">plugin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">&lt;!-- ↑↑ before ↑↑, ↓↓ after ↓↓ --&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">plugin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;io.github.git-commit-id&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;git-commit-id-maven-plugin&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">plugin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2b-springdoc" tabindex="-1"><a class="header-anchor" href="#_2b-springdoc"><span>2b.<a href="https://springdoc.org/v2/" target="_blank" rel="noopener noreferrer">springdoc</a></span></a></h3><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" data-title="xml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;org.springdoc&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;springdoc-openapi-ui&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;org.springdoc&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;springdoc-openapi-javadoc&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">&lt;!-- ↑↑ before ↑↑, ↓↓ after ↓↓ --&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;org.springdoc&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;springdoc-openapi-starter-webmvc-ui&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// import org.springdoc.api.annotations.ParameterObject;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> org.springdoc.core.annotations.ParameterObject</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// import org.springdoc.core.SpringDocConfiguration;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> org.springdoc.core.configuration.SpringDocConfiguration</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// import org.springdoc.core.SpringDocUtils;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> org.springdoc.core.utils.SpringDocUtils</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// import org.springdoc.core.customizers.OpenApiCustomiser;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> org.springdoc.core.customizers.OpenApiCustomizer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_9a4-3-javax-to-jakarta-namespace" tabindex="-1"><a class="header-anchor" href="#_9a4-3-javax-to-jakarta-namespace"><span>9A4.3.javax to jakarta namespace</span></a></h2><p>The namespace changes have been completed in the springboot3 ecology. Wings mainly involves the following</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">jakarta</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">annotation</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">PostConstruct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">jakarta</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">mail</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">*</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">jakarta</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">servlet</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">*</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">jakarta</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">validation</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">*</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">jakarta</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">xml</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">bind</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">*</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Note that not all replacements are needed, handle and exclude them differently,</p><ul><li>Not all replacements are needed under the javax namespace</li><li>Due to indirect dependencies, both javax and jakarta packages may exist</li><li>Most 3rd libs release both javax and jakarta</li><li>IDEA provides migration tools</li></ul><h2 id="_9a4-4-rework-autogen" tabindex="-1"><a class="header-anchor" href="#_9a4-4-rework-autogen"><span>9A4.4.Rework Autogen</span></a></h2>`,15),u=n('<p>Sine JPA have been disabled, now only the following javax annotations are affected,</p><ul><li>javax.annotation.processing.Generated (JDK 9+ )</li><li>javax.annotation.Generated (JDK 8- )</li></ul><h2 id="_9a4-5-add-modules-and-add-opens" tabindex="-1"><a class="header-anchor" href="#_9a4-5-add-modules-and-add-opens"><span>9A4.5.Add-modules and Add-opens</span></a></h2><p>Default <code>--illegal-access=deny</code> in java17, without <code>add-opens</code> will throws the runtime error. The wings starter.sh, pom.xml, are set correctly and can be used directly.</p><p>It is known that the <code>argLine</code> of surefire is not referenced when executing the <code>Whole project</code> test in IDEA. As a result, some of the test cases that use the reflection will fail. The solution is as follows.</p><ul><li>Execute by module, and <code>argLine</code> will be auto set correctly.</li><li>For the whole project, you need to specify <code>add-opens</code> by yourself and refer to <code>argLine</code>.</li></ul><h2 id="_9a4-6-syntax-for-java17" tabindex="-1"><a class="header-anchor" href="#_9a4-6-syntax-for-java17"><span>9A4.6.Syntax for java17</span></a></h2>',7),y=i("ul",null,[i("li",null,[s("PatternVariable of type casting "),i("code",null,"instanceof final G g")]),i("li",null,[s("Enhanced switch with arrow "),i("code",null,"case gg -> ;")]),i("li",null,[s("Text block instead of string concat "),i("code",null,'""" """')])],-1),m=n(`<ul><li>record - try to use lombok for more features and extensibility, except for small classes</li></ul><h2 id="_9a4-7-important-dependency" tabindex="-1"><a class="header-anchor" href="#_9a4-7-important-dependency"><span>9A4.7.Important Dependency</span></a></h2><ul><li>mirana 2.4.0-SNAPSHOT → 2.4.4-SNAPSHOT</li><li>springdoc 1.6.14 → 2.0.2 <ul><li>org.springdoc:springdoc-openapi-starter-webmvc-ui</li></ul></li><li>boot-admin 2.7.10 → 3.0.0</li><li>sentry 6.12.1 → 6.13.0 <ul><li>sentry-spring-boot-starter-jakarta</li></ul></li><li>flatten-maven-plugin 1.2.7 → 1.3.0</li></ul><h2 id="_9a4-8-wingsboot-user" tabindex="-1"><a class="header-anchor" href="#_9a4-8-wingsboot-user"><span>9A4.8.Wingsboot User</span></a></h2><p>This subsection applies to upgrading of maven projects with wingsboot as parent in IDEA. It is recommended to upgrade from <code>2.7.7.220</code>, otherwise you will need to temporarily import the libs when regenerating the jooq code.</p><p>Before starting the upgrade, the following things need to be noted and done on a new git branch</p><ul><li>Do only one step at a time, and move on to the next if it succeeds</li><li>Commit the workspace in time for an easy fallback when each step succeeds</li><li>Make sure the compilation works first, then run runtime testcase</li></ul><p>You can use <a href="https://github.com/spring-projects-experimental/spring-boot-migrator" target="_blank" rel="noopener noreferrer">spring-boot-migrator</a> to do automatic upgrades.</p><h3 id="_8a-modify-parent-version" tabindex="-1"><a class="header-anchor" href="#_8a-modify-parent-version"><span>8a.Modify parent/version</span></a></h3><p>Refer to <a href="#9a41modify-pomxml">Section 1</a> and use <code>3.0.3.300-SNAPSHOT</code>.</p><p>Note that you should not change the version of the unnecessary dependencies, only the wings and spring related ones. Do not change any business libs that do not affect the compilation, to avoid changing too much content at once without clear boundaries.</p><h3 id="_8b-project-use-jdk17" tabindex="-1"><a class="header-anchor" href="#_8b-project-use-jdk17"><span>8b.Project Use JDK17</span></a></h3><p>Use OpenJDK17 from <a href="https://adoptium.net/temurin/releases/?version=17" target="_blank" rel="noopener noreferrer">Eclipse Temurin™</a> install directly via <a href="https://asdf-vm.com" target="_blank" rel="noopener noreferrer">asdf</a> <code>asdf install java temurin-17.0.9+9</code></p><p>Re-import the maven project, or set it in IDEA&#39;s menu</p><p><code>File</code> | <code>Project Structure</code> (<code>⌘;</code>) | <code>Project</code></p><ul><li>SDK - <code>temurin-17</code></li><li>Language level - <code>SDK default</code></li></ul><h3 id="_8c-namespace-jakarta" tabindex="-1"><a class="header-anchor" href="#_8c-namespace-jakarta"><span>8c.Namespace jakarta</span></a></h3><p>Using IDEA&#39;s refactoring feature to do jakarta&#39;s namespace migration, it is recommended to exclude jooq&#39;s auto-generated code first.</p><p><code>Refactor</code> | <code>Migrate Packages and Classes</code> | <code>JavaEE to JakartaEE</code></p><p>If Jooq code is included, do not replace <code>javax.annotation.processing.Generated</code>.</p><p>After the migration is complete, the compilation error, should be mainly focus on the code generated by Jooq, see the next section for the solution.</p><p>If there are 3rd deps, such as <code>sentry</code>, generally use the <code>artifactId</code> with <code>-jakarta</code>.</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" data-title="xml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;io.sentry&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;sentry-spring-boot-starter&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">&lt;!-- ↑↑ before ↑↑, ↓↓ after ↓↓ --&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;io.sentry&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;sentry-spring-boot-starter-jakarta&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8d-regenerate-jooq-code" tabindex="-1"><a class="header-anchor" href="#_8d-regenerate-jooq-code"><span>8d.Regenerate Jooq Code</span></a></h3><p>If you are not upgrading from <code>2.7.7.220</code>, you need to temporarily import the following dependencies, and remove them after regenerating the jooq code.</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" data-title="xml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">&lt;!-- javax.persistence --&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;jakarta.persistence&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;jakarta.persistence-api&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">&lt;!-- javax.validation.constraints --&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;jakarta.validation&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;jakarta.validation-api&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>There may be a <code>jakarta.annotation.processing.Generated</code> compilation error, you need to replace it back to <code>javax.annotation.processing.Generated</code></p><h3 id="_8e-upgrade-other-libs" tabindex="-1"><a class="header-anchor" href="#_8e-upgrade-other-libs"><span>8e.Upgrade Other Libs</span></a></h3><ul><li>Libs without compilation errors during upgrade</li><li>Those that affect compilation, but can be quickly fixed or hidden</li></ul><p>Other than the above libs, it is recommended to upgrade them one by one after the above major changes are completed.</p><h3 id="_8f-official-spring-migrator" tabindex="-1"><a class="header-anchor" href="#_8f-official-spring-migrator"><span>8f.Official Spring Migrator</span></a></h3><p>After wings upgrade, follow the official spring upgrade manual and use the automated tool to check.</p><ul><li><a href="https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Release-Notes" target="_blank" rel="noopener noreferrer">Release Notes</a> Checking the dependencies</li><li><a href="https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Migration-Guide" target="_blank" rel="noopener noreferrer">3.0-Migration-Guide</a> Upgrade Guide</li><li><a href="https://github.com/spring-projects-experimental/spring-boot-migrator" target="_blank" rel="noopener noreferrer">spring-boot-migrator</a> Automatic upgrade tool</li></ul><p>Because the cascading properties of wings are not recognized by spring, the following properties need to be set manually,</p><ul><li>logging.pattern.dateformat</li><li>management.endpoints.jmx.exposure.include</li><li>spring.factories to org.springframework.boot.autoconfigure.AutoConfiguration.imports</li></ul><h3 id="_8g-nosuchbeandefinitionexception" tabindex="-1"><a class="header-anchor" href="#_8g-nosuchbeandefinitionexception"><span>8g.NoSuchBeanDefinitionException</span></a></h3><blockquote><p>org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;.JiayuincFedexProp&#39; available: expected at least 1 bean which qualifies as autowire candidate.</p></blockquote><p>If using AutoConfiguration in spring.factories to Auto Scan Bean, must change to, org.springframework.boot.autoconfigure.AutoConfiguration.imports</p>`,38);function A(f,b){const t=r("RouteLink"),l=r("Badge");return d(),p("div",null,[k,c,i("ul",null,[g,i("li",null,[s("check "),a(t,{to:"/9-example/9a.wings-change/9a0.notable.html"},{default:e(()=>[s("wings notable changelog")]),_:1})])]),B,i("p",null,[s("See the "),a(t,{to:"/9-example/9a.wings-change/9a3.277-220.html"},{default:e(()=>[s("277.220")]),_:1}),s(" upgrade guide.")]),u,i("p",null,[s("java17 provides some comfortable syntax features, "),a(l,{type:"tip",vertical:"top"},{default:e(()=>[s("RECOMMENDED")]),_:1}),s(" to use")]),y,i("p",null,[s("The following features are "),a(l,{type:"warning",vertical:"top"},{default:e(()=>[s("NOT")]),_:1}),s(" recommended")]),m])}const F=h(o,[["render",A],["__file","9a4.303-300.html.vue"]]),_=JSON.parse('{"path":"/9-example/9a.wings-change/9a4.303-300.html","title":"9A4.Upgrade 3.0.3.300","lang":"en-US","frontmatter":{"isOriginal":true,"icon":"circle-up","category":["Practice","Upgrade"],"description":"9A4.Upgrade 3.0.3.300 Upgraded build to 300 with the following major incompatibility, java 17 instead of 11 EE rename, jakarta instead of javax boot 3.0 instead of 2.7, Release ...","GIT_REPO_HEAD":"2025-01-17 e638e7035dc7958e3f145793e37c871eb02f12d5","head":[["link",{"rel":"alternate","hreflang":"zh-cn","href":"https://wings.fessional.pro/zh/9-example/9a.wings-change/9a4.303-300.html"}],["meta",{"property":"og:url","content":"https://wings.fessional.pro/9-example/9a.wings-change/9a4.303-300.html"}],["meta",{"property":"og:site_name","content":"WingsBoot Win Sprint"}],["meta",{"property":"og:title","content":"9A4.Upgrade 3.0.3.300"}],["meta",{"property":"og:description","content":"9A4.Upgrade 3.0.3.300 Upgraded build to 300 with the following major incompatibility, java 17 instead of 11 EE rename, jakarta instead of javax boot 3.0 instead of 2.7, Release ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:locale:alternate","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-06-12T00:21:52.000Z"}],["meta",{"property":"article:author","content":"trydofor"}],["meta",{"property":"article:modified_time","content":"2024-06-12T00:21:52.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"9A4.Upgrade 3.0.3.300\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-06-12T00:21:52.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"trydofor\\",\\"url\\":\\"https://www.trydofor.com\\"}]}"]]},"headers":[{"level":2,"title":"9A4.1.Modify pom.xml","slug":"_9a4-1-modify-pom-xml","link":"#_9a4-1-modify-pom-xml","children":[]},{"level":2,"title":"9A4.2.Dependency Change","slug":"_9a4-2-dependency-change","link":"#_9a4-2-dependency-change","children":[{"level":3,"title":"2a.git-commit-id-plugin","slug":"_2a-git-commit-id-plugin","link":"#_2a-git-commit-id-plugin","children":[]},{"level":3,"title":"2b.springdoc","slug":"_2b-springdoc","link":"#_2b-springdoc","children":[]}]},{"level":2,"title":"9A4.3.javax to jakarta namespace","slug":"_9a4-3-javax-to-jakarta-namespace","link":"#_9a4-3-javax-to-jakarta-namespace","children":[]},{"level":2,"title":"9A4.4.Rework Autogen","slug":"_9a4-4-rework-autogen","link":"#_9a4-4-rework-autogen","children":[]},{"level":2,"title":"9A4.5.Add-modules and Add-opens","slug":"_9a4-5-add-modules-and-add-opens","link":"#_9a4-5-add-modules-and-add-opens","children":[]},{"level":2,"title":"9A4.6.Syntax for java17","slug":"_9a4-6-syntax-for-java17","link":"#_9a4-6-syntax-for-java17","children":[]},{"level":2,"title":"9A4.7.Important Dependency","slug":"_9a4-7-important-dependency","link":"#_9a4-7-important-dependency","children":[]},{"level":2,"title":"9A4.8.Wingsboot User","slug":"_9a4-8-wingsboot-user","link":"#_9a4-8-wingsboot-user","children":[{"level":3,"title":"8a.Modify parent/version","slug":"_8a-modify-parent-version","link":"#_8a-modify-parent-version","children":[]},{"level":3,"title":"8b.Project Use JDK17","slug":"_8b-project-use-jdk17","link":"#_8b-project-use-jdk17","children":[]},{"level":3,"title":"8c.Namespace jakarta","slug":"_8c-namespace-jakarta","link":"#_8c-namespace-jakarta","children":[]},{"level":3,"title":"8d.Regenerate Jooq Code","slug":"_8d-regenerate-jooq-code","link":"#_8d-regenerate-jooq-code","children":[]},{"level":3,"title":"8e.Upgrade Other Libs","slug":"_8e-upgrade-other-libs","link":"#_8e-upgrade-other-libs","children":[]},{"level":3,"title":"8f.Official Spring Migrator","slug":"_8f-official-spring-migrator","link":"#_8f-official-spring-migrator","children":[]},{"level":3,"title":"8g.NoSuchBeanDefinitionException","slug":"_8g-nosuchbeandefinitionexception","link":"#_8g-nosuchbeandefinitionexception","children":[]}]}],"git":{"createdTime":1675228675000,"updatedTime":1718151712000,"contributors":[{"name":"trydofor","email":"trydofor@gmail.com","commits":8}]},"readingTime":{"minutes":3.27,"words":982},"filePathRelative":"9-example/9a.wings-change/9a4.303-300.md","localizedDate":"February 1, 2023","autoDesc":true}');export{F as comp,_ as data};
