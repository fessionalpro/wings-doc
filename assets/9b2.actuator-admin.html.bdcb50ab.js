import{_ as i}from"./plugin-vue_export-helper.21dcd24c.js";import{r as o,o as r,c as l,a as n,b as a,d as t,e as s}from"./app.0fcb1318.js";const c={},d=t('<h1 id="_9b2-actuator-admin\u76D1\u63A7" tabindex="-1"><a class="header-anchor" href="#_9b2-actuator-admin\u76D1\u63A7" aria-hidden="true">#</a> 9B2.actuator/admin\u76D1\u63A7</h1><p>wings\u4F53\u7CFB\u4E0B\uFF0C\u9ED8\u8BA4\u542F\u52A8\u4E86\u57FA\u672C\u7684\u76D1\u63A7</p><ul><li>Wings \u542F\u505C\u548C\u65E5\u5FD7\u901A\u77E5</li><li>Hazelcast Management Center</li><li>Spring Boot Admin</li><li>Prometheus Grafana</li><li>Sentry \u65E5\u5FD7\u76D1\u63A7</li></ul><h2 id="_9b2-1-\u542F\u505C\u548C\u65E5\u5FD7" tabindex="-1"><a class="header-anchor" href="#_9b2-1-\u542F\u505C\u548C\u65E5\u5FD7" aria-hidden="true">#</a> 9B2.1.\u542F\u505C\u548C\u65E5\u5FD7</h2><p>wings app \u9ED8\u8BA4\u4F1A\u901A\u8FC7\u9489\u9489\u62A5\u544A\u542F\u52A8\uFF0C\u505C\u6B62\u4FE1\u606F\uFF0C\u4EE5\u53CA\u65E5\u5FD7\u6587\u4EF6\u4E2DWARN\u7684\u4FE1\u606F\u3002 \u800Cwings-starter.sh\u4E5F\u53EF\u4EE5\u901A\u8FC7cron\u76D1\u63A7pid\u662F\u5426\u5B58\u5728\u548Clog\u662F\u5426\u589E\u957F\u3002</p><h2 id="_9b2-2-hazelcast\u76D1\u63A7" tabindex="-1"><a class="header-anchor" href="#_9b2-2-hazelcast\u76D1\u63A7" aria-hidden="true">#</a> 9B2.2.hazelcast\u76D1\u63A7</h2><p>Hazelcast\u7248\u672C\u968Fspring boot\u540C\u6B65\u66F4\u65B0\uFF0C\u4E3B\u8981\u7528\u4F5Ccaching, Session\uFF0C\u5176\u6B21\u662FEvent\u548CLock\uFF0CMessaging\u7B49\u3002</p>',7),p={href:"https://docs.hazelcast.com/imdg/4.2/",target:"_blank",rel:"noopener noreferrer"},u=s("Hazelcast IMDG"),m=s(" \u5F00\u6E90\u7248\u662FApache2\u8BB8\u53EF\u8BC1\uFF08\u5305\u62EC\u72EC\u7ACB\u90E8\u7F72\u548CSpringBoot\u4E2D\u7684Runtime\u5F62\u5F0F\uFF09\uFF0C \u76F8\u6BD4\u4E8EPro\u548CEnterprise\u7248\uFF0C\u4E3B\u8981\u7F3A\u5C11\u4E86Persistence\u548CSecurity suite\uFF0C\u5728\u5185\u7F51\u4E2D\u5F71\u54CD\u4E0D\u5927\u3002"),h=n("p",null,"\u5728wings\u7684\u57FA\u672C\u5E94\u7528\u4E2D\uFF0C\u4E00\u822C\u53EA\u67093\u4E2A\u8282\u70B9(admin/devops/front)\u6784\u6210\u7684\u96C6\u7FA4\uFF0C\u4F7F\u7528log\u548CManagementCenter\u76D1\u63A7\u3002 \u56E03\u8282\u70B9\u96C6\u7FA4\u7684\u5F3A\u58EE\u6027\u521A\u597D\u591F\u7528\uFF0C\u4EE5CP Subsystem Unsafe Mode\u8FD0\u884C\uFF0C\u4EC5\u80FD\u63D0\u4F9B\u5F31\u4E00\u81F4\u6027\u4FDD\u8BC1\uFF0C\u4E0D\u5982CP\u7684\u5F3A\u4E00\u81F4\u6027\u3002",-1),v=n("ul",null,[n("li",null,"CP Subsystem Management APIs are not available."),n("li",null,"split-brain protection is not supported.")],-1),b={href:"https://docs.hazelcast.com/management-center/5.0/",target:"_blank",rel:"noopener noreferrer"},_=s("Management Center"),g=s(" \u65E0\u8BB8\u53EF\u65F6\uFF0C\u4EC5\u80FD\u76D1\u63A7\u6700\u591A3\u4E2A\u6210\u5458\u7684\u96C6\u7FA4\u3002 \u4F7F\u7528\u65F6\u6CE8\u610F\u8981\u8BBE\u7F6E\u5F3A\u58EE\u5BC6\u7801\uFF0C\u516C\u7F51\u4E0A\u8981\u7981\u7528\u4E00\u4E9B\u4E0D\u5B89\u5168\u9009\u9879\uFF0C\u5982script"),k=t(`<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">wget</span> https://repository.hazelcast.com/download/management-center/hazelcast-management-center-5.0.4.zip
<span class="token function">unzip</span> hazelcast-management-center-5.0.4.zip
<span class="token builtin class-name">cd</span> hazelcast-management-center-5.0.4
<span class="token function">nohup</span> bin/start.sh <span class="token number">8090</span> <span class="token operator">&gt;</span>hazelcast-management-center.log <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1),f=s("\u8BBF\u95EE "),y={href:"http://localhost:8090",target:"_blank",rel:"noopener noreferrer"},z=s("http://localhost:8090"),x=s("\uFF0C\u540C\u65F6\u8BBE\u7F6E\u597D\u8DB3\u591F\u5F3A\u5EA6\u7684\u5BC6\u7801\u5373\u53EF\u3002 wings-starter.sh\u540C\u7EA7\u76EE\u5F55\u4E0B\u751F\u6210diagnostics.log\uFF0C\u53EF\u67E5\u770BMetric\u53CA\u5176\u4ED6\u4FE1\u606F\u3002wings\u9ED8\u8BA4\u7684period.seconds\u662F600\uFF0C\u537310\u5206\u949F\u3002"),q=n("h2",{id:"_9b2-3-spring-boot-admin",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_9b2-3-spring-boot-admin","aria-hidden":"true"},"#"),s(" 9B2.3.Spring Boot Admin")],-1),w=n("p",null,"\u4EE5devops\u4E3Aserver\uFF0C\u5176\u4ED6app\u4E3Aclient\uFF0C\u81EA\u52A8\u542F\u52A8\u548C\u6CE8\u518C\uFF0C\u53C2\u8003wings-boot-admin.properties\u914D\u7F6E\u3002 \u5176\u4E2D\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0C\u7528\u6237\u6743\u9650\u8BBE\u7F6E\uFF0C\u5BC6\u7801\u662F\u5426\u5F3A\u58EE\uFF0C\u9489\u9489token\u548C\u5173\u952E\u8BCD\u662F\u5426\u6B63\u786E\u3002",-1),B=n("p",null,"\u5176\u4E2D\uFF0Cserver\u548Cclient\u95F4\u662Fbasic\u9A8C\u8BC1\u7684wings\u5B9A\u5236\u7248\uFF0C\u4EE5\u65F6\u95F4\u6233\u548Cmd5\u6458\u8981\uFF0C\u53D6\u4EE3\u660E\u6587\u4F20\u9001\u5BC6\u7801\uFF0C\u4F46\u5B89\u5168\u6027\u4ECD\u4E0D\u9AD8\u3002 \u56E0\u6B64\uFF0C\u5C3D\u91CF\u9664\u4E86\u5BC6\u7801\u5F3A\u58EE\u5916\uFF0C\u9700\u8981\u6CE8\u610F\u5185\u7F51\u9694\u79BB\uFF0C\u4F20\u8F93\u5C42\u52A0\u5BC6\uFF0C\u5C3D\u91CF\u4F7F\u7528https\u7B49\u3002",-1),E=n("p",null,"\u5982\u6F14\u793A\u5DE5\u7A0B\u7ED3\u6784\u4E00\u6837\uFF0C\u5728devops\u7684dependency\u4E2D\u589E\u52A0spring-boot-admin-starter-server \u800C\u5728\u5176\u4ED6boot\u5E94\u7528\uFF0C\u5982admin\u4E2D\uFF0C\u589E\u52A0spring-boot-admin-starter-client\u4F9D\u8D56\u3002 \u540C\u65F6\uFF0C\u5206\u522B\u914D\u7F6Ewings-boot-admin.properties\u3002 \u6F14\u793A\u5DE5\u7A0B\u4E2D\u5728common\u7EDF\u4E00\u914D\u7F6E\u7684\u3002",-1),N=n("h2",{id:"_9b2-4-prometheus-grafana",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_9b2-4-prometheus-grafana","aria-hidden":"true"},"#"),s(" 9B2.4.Prometheus Grafana")],-1),D=s("\u4F7F\u7528 "),M={href:"https://prometheus.io/docs/prometheus/latest/getting_started/",target:"_blank",rel:"noopener noreferrer"},S=s("prometheus"),A=s(" pull\u6570\u636E\u3002 \u82E5\u9700\u8981push\u5F62\u5F0F\uFF0C\u53EF\u4F7F\u7528 pushgateway"),O=t(`<p>prometheus \u4EC5\u4F5C\u4E3A\u6570\u636E\u5E93\uFF0C\u5E76\u4E14\u88F8\u5954\uFF0C\u6CA1\u6709\u7528\u6237\u9A8C\u8BC1\uFF0C\u9700\u8981\u81EA\u5DF1\u4FDD\u62A4</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u68C0\u67E5 prometheus</span>
<span class="token function">curl</span> -G http://localhost:8093/actuator/prometheus -u <span class="token string">&quot;boot-admin-client:<span class="token variable">\${DING_TALK_TOKEN}</span>&quot;</span>
<span class="token comment"># prometheus\u914D\u7F6E\u6587\u4EF6</span>
<span class="token function">tee</span> /Users/trydofor/Docker/prometheus/conf/prometheus.yml <span class="token operator">&lt;&lt;</span> <span class="token string">EOF
scrape_configs:
  - job_name: &quot;wings-winx&quot;
    metrics_path: &quot;/actuator/prometheus&quot;
    static_configs:
      - targets: 
        - &quot;host.docker.internal:8091&quot;
        - &quot;host.docker.internal:8092&quot;
        - &quot;host.docker.internal:8093&quot;
    basic_auth:
      username: &quot;boot-admin-client&quot;
      password: &quot;<span class="token variable">\${DING_TALK_TOKEN}</span>&quot;
EOF</span>

<span class="token comment"># \u542F\u52A8docker</span>
<span class="token function">docker</span> run -d <span class="token punctuation">\\</span>
 --name prometheus <span class="token punctuation">\\</span>
 --restart<span class="token operator">=</span>unless-stopped <span class="token punctuation">\\</span>
 -v /Users/trydofor/Docker/prometheus/conf:/etc/prometheus <span class="token punctuation">\\</span>
 -v /Users/trydofor/Docker/prometheus/data:/prometheus <span class="token punctuation">\\</span>
 -p <span class="token number">9090</span>:9090 <span class="token punctuation">\\</span>
prom/prometheus

<span class="token comment"># prometheus\u914D\u7F6E\u6587\u4EF6</span>
<span class="token function">tee</span> /Users/trydofor/Docker/grafana/conf/grafana.ini <span class="token operator">&lt;&lt;</span> <span class="token string">EOF
[security]
admin_user = admin
admin_password = <span class="token variable">\${DING_TALK_TOKEN}</span>
EOF</span>

<span class="token comment"># \u542F\u52A8docker</span>
<span class="token function">docker</span> run -d <span class="token punctuation">\\</span>
 --name grafana-oss <span class="token punctuation">\\</span>
 --restart<span class="token operator">=</span>unless-stopped <span class="token punctuation">\\</span>
 -v /Users/trydofor/Docker/grafana/conf:/etc/grafana <span class="token punctuation">\\</span>
 -v /Users/trydofor/Docker/grafana/data:/var/lib/grafana <span class="token punctuation">\\</span>
 -p <span class="token number">3000</span>:3000 <span class="token punctuation">\\</span>
grafana/grafana-oss
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7136\u540E\u5BFC\u5165 \u9884\u5B9A\u4E49\u7684\u9762\u677F\u3002</p>`,3),P={href:"https://grafana.com/grafana/dashboards/4701",target:"_blank",rel:"noopener noreferrer"},C=s("JVM Micrometer / 4701"),G=n("h2",{id:"_9b2-5-sentry-\u65E5\u5FD7\u76D1\u63A7",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_9b2-5-sentry-\u65E5\u5FD7\u76D1\u63A7","aria-hidden":"true"},"#"),s(" 9B2.5.Sentry \u65E5\u5FD7\u76D1\u63A7")],-1),I=s("\u53EF\u4EE5\u4F7F\u7528"),T={href:"https://sentry.io",target:"_blank",rel:"noopener noreferrer"},U=s("\u5B98\u65B9\u670D\u52A1"),K=s("\u6216\u8005"),L={href:"https://github.com/getsentry/self-hosted",target:"_blank",rel:"noopener noreferrer"},V=s("\u5B98\u65B9docker"),F=t(`<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#https://develop.sentry.dev/self-hosted/</span>
<span class="token function">wget</span> -O sendtry.tgz https://github.com/getsentry/self-hosted/archive/refs/tags/22.2.0.tar.gz 
<span class="token function">tar</span> xzf sendtry.tgz
<span class="token builtin class-name">cd</span> self-hosted-22.2.0/
./install.sh
<span class="token comment"># https://docs.docker.com/engine/install/ubuntu/</span>
<span class="token comment"># https://docs.docker.com/engine/install/linux-postinstall/</span>
<span class="token comment"># \u4FEE\u6539mail.*\u5BF9\u5E94\u7684\u90AE\u4EF6\u914D\u7F6E\u9879\uFF0C</span>
<span class="token function">vi</span> sentry/config.yml
<span class="token comment">#mail.backend: &#39;smtp&#39;</span>
<span class="token comment">#mail.host: &#39;smtp.exmail.qq.com&#39;</span>
<span class="token comment">#mail.port: 465</span>
<span class="token comment">#mail.use-ssl: true</span>
<span class="token function">docker-compose</span> up -d
<span class="token comment"># \u4FEE\u6539\u5176\u4ED6\u914D\u7F6E\uFF0C\u53EF\u4EE5\u5148stop\u518Dup</span>
<span class="token function">docker-compose</span> stop
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1);function H($,R){const e=o("ExternalLinkIcon");return r(),l("div",null,[d,n("p",null,[n("a",p,[u,a(e)]),m]),h,v,n("p",null,[n("a",b,[_,a(e)]),g]),k,n("p",null,[f,n("a",y,[z,a(e)]),x]),q,w,B,E,N,n("p",null,[D,n("a",M,[S,a(e)]),A]),O,n("p",null,[n("a",P,[C,a(e)])]),G,n("p",null,[I,n("a",T,[U,a(e)]),K,n("a",L,[V,a(e)])]),F])}var J=i(c,[["render",H],["__file","9b2.actuator-admin.html.vue"]]);export{J as default};
