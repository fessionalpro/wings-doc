import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as i,b as a,o as t}from"./app-CCOA2OJI.js";const n={};function l(o,e){return t(),i("div",null,e[0]||(e[0]=[a(`<h1 id="_5b-service-consumer" tabindex="-1"><a class="header-anchor" href="#_5b-service-consumer"><span>5B.Service Consumer</span></a></h1><p>Prefer to use the Rpc to consume service, also use RestTemplate to simplify the call.</p><h2 id="_5b-1-consumer-convention" tabindex="-1"><a class="header-anchor" href="#_5b-1-consumer-convention"><span>5B.1.Consumer Convention</span></a></h2><ul><li>Let <code>microserviceName</code> be <code>\${servicecomb.service.name}</code></li><li>Let <code>path</code> be the full path to the Mapping, e.g. <code>/full/path/</code></li><li>Rpc locates the service with <code>SchemaId</code> and interface</li><li>Mvc locates the service with a rest-style url <code>cse://microserviceName/path?querystring</code></li><li>Interfaces can be packaged as lib shares or defined by yourself, just make sure the same method signatures</li><li><code>@RpcReference</code> recommends setter injection (2.8.0), also use <code>Invoker.createProxy</code></li></ul><h2 id="_5b-2-consume-style-conversion" tabindex="-1"><a class="header-anchor" href="#_5b-2-consume-style-conversion"><span>5B.2.Consume Style Conversion</span></a></h2><p>Take the call to winx-api&#39;s sayHello as an example, its configuration is as follows.</p><ul><li><code>servicecomb.service.name</code>=<code>winx-api</code></li><li><code>schemaId</code> is <code>@RestSchema(schemaId = &quot;winx-hello&quot;)</code></li><li>base path is <code>@RequestMapping(path = &quot;/&quot;)</code></li><li>path is <code>@RequestMapping(path = &quot;/winx-hello/say-hello&quot;)</code></li></ul><p>The summary of the auto-generation swagger information is as follows,</p><div class="language-yml line-numbers-mode" data-highlighter="shiki" data-ext="yml" data-title="yml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">basePath</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">schemes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">- </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;http&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">paths</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  /winx-hello/say-hello</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      operationId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;sayHello&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      produces</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;text/plain&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      parameters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;name&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        in</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;query&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        required</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        type</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;string&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This service can be accessed by the following call style.</p><ul><li><code>@RpcReference(microserviceName = &quot;winx-api&quot;, schemaId = &quot;winx-hello&quot;)</code></li><li>restTemplate <code>cse://winx-api/winx-hello/say-hello?name=bbb</code></li><li>with auth <code>http://localhost:8095/servcomber/winx-hello/say-hello?name=null</code></li><li>without auth <code>http://localhost:8085/servcomber/batrider-hello/say-hello?name=undefined</code></li></ul><p>Tracing the <code>OperationLocator</code>, we find the difference as follows.</p><ul><li>Rpc locates by microserviceName, schemaId and method operationId</li><li>restTemplate is located by microserviceName and path</li><li>browser http is located by endpoint ip and port, rest prefix and path</li><li>path is <code>basePath</code> + <code>paths</code>, basePath is <code>/</code> by default</li></ul>`,13)]))}const h=s(n,[["render",l],["__file","5b-consumer.html.vue"]]),p=JSON.parse('{"path":"/5-batrider/5b-consumer.html","title":"5B.Service Consumer","lang":"en-US","frontmatter":{"isOriginal":true,"icon":"cloud-sun","category":["Batrider","Consumer"],"description":"5B.Service Consumer Prefer to use the Rpc to consume service, also use RestTemplate to simplify the call. 5B.1.Consumer Convention Let microserviceName be ${servicecomb.service....","GIT_REPO_HEAD":"2025-02-06 a8fb043a36c51604d1078076241b71fc4a4529a1","head":[["link",{"rel":"alternate","hreflang":"zh-cn","href":"https://wings.fessional.pro/zh/5-batrider/5b-consumer.html"}],["meta",{"property":"og:url","content":"https://wings.fessional.pro/5-batrider/5b-consumer.html"}],["meta",{"property":"og:site_name","content":"WingsBoot Win Sprint"}],["meta",{"property":"og:title","content":"5B.Service Consumer"}],["meta",{"property":"og:description","content":"5B.Service Consumer Prefer to use the Rpc to consume service, also use RestTemplate to simplify the call. 5B.1.Consumer Convention Let microserviceName be ${servicecomb.service...."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:locale:alternate","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-01-09T11:57:11.000Z"}],["meta",{"property":"article:modified_time","content":"2025-01-09T11:57:11.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"5B.Service Consumer\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-01-09T11:57:11.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"trydofor\\",\\"url\\":\\"https://www.trydofor.com\\"}]}"]]},"headers":[{"level":2,"title":"5B.1.Consumer Convention","slug":"_5b-1-consumer-convention","link":"#_5b-1-consumer-convention","children":[]},{"level":2,"title":"5B.2.Consume Style Conversion","slug":"_5b-2-consume-style-conversion","link":"#_5b-2-consume-style-conversion","children":[]}],"git":{"createdTime":1660370231000,"updatedTime":1736423831000,"contributors":[{"name":"trydofor","username":"trydofor","email":"trydofor@gmail.com","commits":10,"url":"https://github.com/trydofor"}]},"readingTime":{"minutes":0.84,"words":252},"filePathRelative":"5-batrider/5b-consumer.md","localizedDate":"August 13, 2022","autoDesc":true}');export{h as comp,p as data};
