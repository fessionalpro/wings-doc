import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as t,b as n,o as i}from"./app-B3mmVXA7.js";const o={};function s(r,e){return i(),t("div",null,[...e[0]||(e[0]=[n('<h1 id="_8a-tinytask-component" tabindex="-1"><a class="header-anchor" href="#_8a-tinytask-component"><span>8A.TinyTask Component</span></a></h1><p>Based on Spring Schedule, provides database-centric task scheduling.</p><ul><li>Auto discovery and execution</li><li>Can cancel, start, change config at runtime</li><li>Enable task notification</li><li>Query task execution history</li></ul><h2 id="_8a-1-design-requirement" tabindex="-1"><a class="header-anchor" href="#_8a-1-design-requirement"><span>8A.1.Design Requirement</span></a></h2><p>TinyTask is designed to be strongly typed and static, so by default it is limited to dynamically adding tasks.</p><ul><li>The task object must be a SpringBean</li><li>Use @TinyTask.Auto to auto discover</li><li>Entry methods must be annotated with @TinyTask</li><li>Set task properties via configuration file</li><li>Final configuration is based on database unless version overrides</li><li>Tasks can only be started in restricted app and run modes</li><li>Task itself can be concurrency controlled (Jvm and Database)</li></ul><h2 id="_8a-2-config-override" tabindex="-1"><a class="header-anchor" href="#_8a-2-config-override"><span>8A.2.Config Override</span></a></h2><p>Tasks can be added automatically or manually. Beans with @TinyTask.Auto are started automatically. They can also be started manually using the TinyTaskService.schedule method.</p><p>The task configuration is merged first, with priority from highest to lowest.</p><ul><li>property value of the task&#39;s own key</li><li>default value of the task</li><li>value from the annotation</li></ul><p>The above merged config becomes the tasks properties and will be compared with the current value in the database. The larger version takes precedence, and if equal, the database (win_task_define table) takes precedence.</p><h2 id="_8a-3-task-schedule" tabindex="-1"><a class="header-anchor" href="#_8a-3-task-schedule"><span>8A.3.Task Schedule</span></a></h2><p>Tasks by execution time are divided into <code>fast</code> and <code>@Scheduled</code>, corresponding to 2 thread pools. Tasks that generally finish in seconds are fast tasks and run in the <code>fast</code> thread pool, otherwise they run in the <code>@Scheduled</code> default.</p><p>A task must set one of cron/idle/rate for task scheduling. If both are set, cron overrides idle, idle overrides rate.</p><h2 id="_8a-4-task-control" tabindex="-1"><a class="header-anchor" href="#_8a-4-task-control"><span>8A.4.Task Control</span></a></h2><p>TinyTask provides a Controller to control task by default</p><ul><li>task-running - list of running tasks</li><li>task-defined - list of defined tasks</li><li>task-result - list of task history</li><li>task-cancel - cancels a task</li><li>task-launch - starts a task</li><li>task-force - forces a task to start</li><li>task-enable - enable or disable a task</li><li>task-prop-save - update a task&#39;s properties</li><li>task-prop-load - load properties of a task</li><li>task-prop-conf - task configuration properties</li><li>task-prop-diff - task property differences</li></ul><p>Recommended to control task in hardcoding, for more secure and strongly typed,</p><ul><li>TinyTaskConfService - configuration related service</li><li>TinyTaskExecService - execute related services</li><li>TinyTaskService - scheduling task entry</li></ul><h2 id="_8a-5-execute-flow" tabindex="-1"><a class="header-anchor" href="#_8a-5-execute-flow"><span>8A.5.execute flow</span></a></h2><p>normal schedule (launch)</p><img src="https://www.plantuml.com/plantuml/svg/bLB1QiCm3BttAtGgBMJidiCeMqTXZ3BMmiwA_TgOA7AndT3-_N3Q3GPfwKwsd_IUdcGjOkAGkbOcMwUdBSVczGYpGUYT0JqyqGXSad2dffuvEoyeeFKzw8NLuAhAMz-kn5Sixzuq9OatJMPVI_zocj4bTawnP9yPRF_2L9t8sN_PDYncZMCYjoCeLmAQJeaFXto4Jk-t4xa7PQcSIGdjOPoRdTG1R3-ybnpTc1gs4uIIukKwInoRWXJ7D9zSoHvQujWWPFcIzaZdvpDORv7MFZc3CsduQgTxqW6yhnQLvBJt3IZRf1QfzlRUYW6natIfLv3rYiSTExd57n_svw1Ka16m_ax-PWjZ6n1mNjsy0J_pdooWjclb6m00" alt=""><p>force execute (force)</p><img src="https://www.plantuml.com/plantuml/svg/ZP11Yy8m48Nl_HLpLAXupq5aqQl8AknvDdcrGzC996cf_rvIlIohuYrva_U-oTkcp34FlQ_EejSpfsu_mPuGHx6WrOQUo8QQ42qMufQlN3-YHTsX4SMEWo4VsFsLwVTAufud570RmUuOWY_JastX1ezeA3sEYyofgqanvMNrulNy0quTOeatT46-Nx_0-ivq25aixgQv8j4BwIn-nY93ecFeG6LDwf7Ru3ubHgJ1vmUl9XSKwuR5l_F_hppnYEyvgIRhmKe7JBaGgYtK3Rs_0G00" alt="">',24)])])}const d=a(o,[["render",s]]),p=JSON.parse('{"path":"/8-radiant/8a-tinytask.html","title":"8A.TinyTask Component","lang":"en-US","frontmatter":{"isOriginal":true,"icon":"clock","category":["Tiny","Task"],"description":"8A.TinyTask Component Based on Spring Schedule, provides database-centric task scheduling. Auto discovery and execution Can cancel, start, change config at runtime Enable task n...","GIT_REPO_HEAD":"2025-09-01 bf16720a95aa32d38b537cc338e086dd2483e52b\\n","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"8A.TinyTask Component\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-01-09T11:57:11.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"trydofor\\",\\"url\\":\\"https://www.trydofor.com\\"}]}"],["meta",{"property":"og:url","content":"https://wings.fessional.pro/8-radiant/8a-tinytask.html"}],["meta",{"property":"og:site_name","content":"WingsBoot Win Sprint"}],["meta",{"property":"og:title","content":"8A.TinyTask Component"}],["meta",{"property":"og:description","content":"8A.TinyTask Component Based on Spring Schedule, provides database-centric task scheduling. Auto discovery and execution Can cancel, start, change config at runtime Enable task n..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:locale:alternate","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-01-09T11:57:11.000Z"}],["meta",{"property":"article:modified_time","content":"2025-01-09T11:57:11.000Z"}],["link",{"rel":"alternate","hreflang":"zh-cn","href":"https://wings.fessional.pro/zh/8-radiant/8a-tinytask.html"}]]},"git":{"createdTime":1672191701000,"updatedTime":1736423831000,"contributors":[{"name":"trydofor","username":"trydofor","email":"trydofor@gmail.com","commits":10,"url":"https://github.com/trydofor"}]},"readingTime":{"minutes":1.57,"words":472},"filePathRelative":"8-radiant/8a-tinytask.md","autoDesc":true}');export{d as comp,p as data};
