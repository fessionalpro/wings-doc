import{_ as d}from"./_plugin-vue_export-helper.cdc0426e.js";import{r as s,o,c as t,b as e,e as r,d as c,f as i}from"./app.d363b873.js";const n={},l=e("h1",{id:"_9c1-\u5907\u4EFD\u53CA\u6062\u590Dmysql",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#_9c1-\u5907\u4EFD\u53CA\u6062\u590Dmysql","aria-hidden":"true"},"#"),r(" 9C1.\u5907\u4EFD\u53CA\u6062\u590Dmysql")],-1),h=e("p",null,"\u9002\u7528\u4E8E mysql 5.7/8.0\uFF0Cnative/cloud\u6570\u636E\u5E93\u3002\u9002\u7528mysqldump\u5907\u4EFD\uFF0C\u9002\u7528mysql\u6062\u590D",-1),p=e("h2",{id:"_9c1-1-\u5907\u4EFD\u65F6\u4E8B\u9879",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#_9c1-1-\u5907\u4EFD\u65F6\u4E8B\u9879","aria-hidden":"true"},"#"),r(" 9C1.1.\u5907\u4EFD\u65F6\u4E8B\u9879")],-1),_={href:"http://wings-mysql-dump.sh",target:"_blank",rel:"noopener noreferrer"},m=i('<p>\u6839\u636Edump\u6587\u4EF6\u4E2D\u7684txt\u6587\u4EF6\u8FDB\u884C scp\uFF0Cgzip \u64CD\u4F5C\u3002</p><h2 id="_9c1-2-\u6062\u590D\u65F6\u4E8B\u9879" tabindex="-1"><a class="header-anchor" href="#_9c1-2-\u6062\u590D\u65F6\u4E8B\u9879" aria-hidden="true">#</a> 9C1.2.\u6062\u590D\u65F6\u4E8B\u9879</h2><p>\u4F7F\u7528mysqldump\u7684\u5907\u4EFD\u65F6\uFF0C\u5728trigger\u65F6\uFF0C\u9700\u8981\u8C03\u6574\u5176\u4E2D\u7684DEFINER <code>sed -E &#39;s/DEFINER=[^*]+//g&#39;</code></p><p>\u4F7F\u7528mysqlpump\u7684\u5907\u4EFD\u65F6\uFF0C\u9700\u8981\u6CE8\u610Fsql\u4E2D\u7684\u539Fdatabase\u9650\u5B9A\uFF0C\u907F\u514D\u9519\u5E93\u3002 <code>sed -E &#39;s/</code>OLD_DB<code>/</code>NEW_DB<code>/g&#39;</code></p><h2 id="_9c1-3-\u5DF2\u77E5\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#_9c1-3-\u5DF2\u77E5\u95EE\u9898" aria-hidden="true">#</a> 9C1.3.\u5DF2\u77E5\u95EE\u9898</h2><p>\u4E91\u6570\u636E\u5E93\u7684root\uFF0C\u901A\u5E38\u6CA1\u6709SHUTDOWN\u548CSUPER\u6743\u9650\uFF0C\u751A\u81F3\u66F4\u591A\uFF0C\u4EE5\u907F\u514D\u7834\u574F\u914D\u7F6E\u3002</p><h3 id="_01-error-1227-the-super-privilege" tabindex="-1"><a class="header-anchor" href="#_01-error-1227-the-super-privilege" aria-hidden="true">#</a> 01.<code>ERROR 1227: the SUPER privilege</code></h3><p>\u5728wings\u4F53\u7CFB\u5185\uFF0C\u6062\u590Dtrigger\u65F6\uFF0C\u56E0\u5BFC\u51FA\u8BED\u53E5\u6709<code>DEFINER=</code>\uFF0C\u4F30\u63D0\u793A\u6743\u9650\u4E0D\u8DB3\u3002 \u9700\u8981\u8BBE\u7F6Etrigger\u6743\u9650\uFF0C\u5E76\u6EE1\u8DB3\u4EE5\u4E0B\u6761\u4EF6\u4E4B\u4E00\u6216\u5168\u90E8\u3002</p><ul><li>mysql\u5BFC\u5165\u65F6\uFF0C\u6309dump\u4E2D\u7684tip\u6267\u884C\uFF0C\u6216\u624B\u5DE5\u6267\u884Csed\u66FF\u6362</li><li>\u670D\u52A1\u5668\u7AEF <code>log_bin_trust_function_creators = 1</code>\uFF0C\u63D0\u793ASUPER\u6743\u9650</li></ul><h3 id="_02-error-1071-max-key-length-is-767" tabindex="-1"><a class="header-anchor" href="#_02-error-1071-max-key-length-is-767" aria-hidden="true">#</a> 02.<code>ERROR 1071: max key length is 767</code></h3><p>\u670D\u52A1\u5668\u7AEF\u8BBE\u7F6E <code>innodb_large_prefix = 1</code> \u4F46\u67D0\u4E9B\u4E91\u9ED8\u8BA4\u914D\u7F6E\u5173\u95ED\u4E86\u6B64\u9009\u9879\u3002 \u53EF\u4EE5\u901A\u8FC7\u63A7\u5236\u53F0\u63D0\u4EA4\u53C2\u6570\u4FEE\u6539\uFF0C\u65E0\u9700\u91CD\u542F\u3002\u4EE5\u4E0B\u662F\u5B57\u7B26\u96C6\u53CAchar,byte\u7684\u77E5\u8BC6\u70B9\u3002</p><ul><li>UTF-8MB4 - 767/4=191</li><li>UTF-8MB4 - 767/3=255</li><li>\u6253\u5F00\u540E\uFF0C\u4ECE 767 \u6269\u5C55\u5230 3072 bytes</li></ul>',12);function u(g,f){const a=s("ExternalLinkIcon");return o(),t("div",null,[l,h,p,e("p",null,[r("\u4F7F\u7528 "),e("a",_,[r("wings-mysql-dump.sh"),c(a)]),r(" \u811A\u672C\u8FDB\u884C\u5907\u4EFD\uFF0C\u9009\u62E9wings.dba\u6743\u9650\u5373\u53EF\u3002 \u82E5\u4F7F\u7528 mysqlpump\uFF0C\u6CE8\u610F\u662Fpump\u4E0D\u662Fdump\uFF0C\u9700\u8981\u989D\u5916\u7684\u6743\u9650\u3002")]),m])}const E=d(n,[["render",u],["__file","9c1.mysql-dump-restore.html.vue"]]);export{E as default};
