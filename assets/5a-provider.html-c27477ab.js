import{_ as n}from"./plugin-vue_export-helper-c27b6911.js";import{o as a,c as s,f as e}from"./app-c894953d.js";const t={},o=e(`<h1 id="_5a-serivce-provider" tabindex="-1"><a class="header-anchor" href="#_5a-serivce-provider" aria-hidden="true">#</a> 5A.Serivce Provider</h1><p>Use SpringMvc annotations to provide services and cowork with WebMvc.</p><h2 id="_5a-1-provider-convention" tabindex="-1"><a class="header-anchor" href="#_5a-1-provider-convention" aria-hidden="true">#</a> 5A.1.Provider Convention</h2><ul><li>Pure interface and pojo definition the <code>contract</code> to avoid Overloading, e.g. <code>HelloContract</code></li><li><code>SchemaId</code> and <code>path</code> are kebab-case, i.e. lowercase hyphens</li><li>Contractor <code>@RestSchema</code> implements the <code>contract</code>, such as <code>HelloContractor</code></li><li>Overloading methods are identified by different suffixes, path is globally unique</li><li>Use only <code>@RestSchema</code>, disable scanning of <code>@RestController</code></li></ul><h2 id="_5a-2-datatype-convention" tabindex="-1"><a class="header-anchor" href="#_5a-2-datatype-convention" aria-hidden="true">#</a> 5A.2.DataType Convention</h2><p>Data type follow the Json convention of Wings to avoid using complex types and structures.</p><p>When pure String is used as body, both Request&#39;s <code>consumes</code> and Response&#39;s <code>produces</code> must use <code>MediaType.TEXT_PLAIN_VALUE</code>, which is different from Spring.</p><h2 id="_5a-3-contract-style" tabindex="-1"><a class="header-anchor" href="#_5a-3-contract-style" aria-hidden="true">#</a> 5A.3.Contract Style</h2><p>The contract is available in both Mvc and Rpc styles, both of which can be easily located and understood.</p><h3 id="mvc-style-root-is-basepath" tabindex="-1"><a class="header-anchor" href="#mvc-style-root-is-basepath" aria-hidden="true">#</a> Mvc Style, Root is BasePath</h3><p>Consistent with the Controller and RequestMapping conventions in wings.</p><ul><li>The basePath on the class is <code>/</code> or <code>/v1</code>, i.e. root path or version</li><li><code>@RequestMapping</code> of the method is the full path, starting with <code>SchemaId</code>.</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RestSchema</span><span class="token punctuation">(</span>schemaId <span class="token operator">=</span> <span class="token string">&quot;batrider-hello&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>path <span class="token operator">=</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BatriderContractor</span> <span class="token keyword">implements</span> <span class="token class-name">HelloContract</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>path <span class="token operator">=</span> <span class="token string">&quot;/batrider-hello/say-hello&quot;</span><span class="token punctuation">,</span> 
    method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">GET</span><span class="token punctuation">,</span> produces <span class="token operator">=</span> <span class="token class-name">MediaType</span><span class="token punctuation">.</span><span class="token constant">TEXT_PLAIN_VALUE</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ResponseBody</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Batrider: Hello &quot;</span> <span class="token operator">+</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="rpc-style-schemaid-is-basepath" tabindex="-1"><a class="header-anchor" href="#rpc-style-schemaid-is-basepath" aria-hidden="true">#</a> Rpc Style, SchemaId is basePath</h3><p>Easier to locate by IDE association, placing the SchemaId in the contract interface</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">HelloContract</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> <span class="token class-name">SchemaId</span> <span class="token operator">=</span> <span class="token string">&quot;winx-hello&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>In the implementation, the provider uses the contract&#39;s SchemaId directly</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RestSchema</span><span class="token punctuation">(</span>schemaId <span class="token operator">=</span> <span class="token class-name">HelloContract<span class="token punctuation">.</span>SchemaId</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>path <span class="token operator">=</span> <span class="token class-name">HelloContract<span class="token punctuation">.</span>SchemaId</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloContractor</span> <span class="token keyword">implements</span> <span class="token class-name">HelloContract</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>path <span class="token operator">=</span> <span class="token string">&quot;/say-hello&quot;</span><span class="token punctuation">,</span> 
    method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">GET</span><span class="token punctuation">,</span> produces <span class="token operator">=</span> <span class="token class-name">MediaType</span><span class="token punctuation">.</span><span class="token constant">TEXT_PLAIN_VALUE</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ResponseBody</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Winx: Hello &quot;</span> <span class="token operator">+</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,18),p=[o];function c(i,l){return a(),s("div",null,p)}const u=n(t,[["render",c],["__file","5a-provider.html.vue"]]);export{u as default};
