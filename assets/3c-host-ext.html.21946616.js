import{_ as a}from"./plugin-vue_export-helper.21dcd24c.js";import{r as l,o as i,c as r,a as n,b as o,d as t,e as s}from"./app.4dea18bd.js";const c={},d=t('<h1 id="_3c-host\u7EE7\u627F\u548Curl\u91CD\u8F7D" tabindex="-1"><a class="header-anchor" href="#_3c-host\u7EE7\u627F\u548Curl\u91CD\u8F7D" aria-hidden="true">#</a> 3C.Host\u7EE7\u627F\u548CURL\u91CD\u8F7D</h1><p>\u57FA\u4E8EMvc\u7279\u6027\u5B9E\u73B0\u4E86Host\u5957\u58F3\u529F\u80FD\u3002\u4E0D\u540C\u4E8E\u53CD\u5411\u4EE3\u7406(nginx)\u7684rewrite\uFF0C</p><ul><li>extend - \u5B50domain\u62E5\u6709\u7236domain\u7684\u5168\u90E8URL</li><li>override - \u5B50domain\u53EF\u4EE5override\u7236domain\u7684URL</li><li>\u5B50domain\u6709\u81EA\u5DF1\u72EC\u7ACB\u7684URL</li><li>domain\u7684\u7EE7\u627F\u57FA\u4E8E host</li></ul><h2 id="_3c-1-\u573A\u666F\u4E3E\u4F8B" tabindex="-1"><a class="header-anchor" href="#_3c-1-\u573A\u666F\u4E3E\u4F8B" aria-hidden="true">#</a> 3C.1.\u573A\u666F\u4E3E\u4F8B</h2><p>\u5047\u8BBE<code>a.com</code>\u662F\u4E00\u4E2A\u6709\u5B8C\u6574\u7684\u529F\u80FDdomain\uFF0C\u4E3E\u4F8B\u5305\u62EC\u4EE5\u4E0B3\u4E2AURL</p><ul><li>GET /user-list.json - \u57FA\u4E8EController</li><li>GET /css/main.css - \u9759\u6001\u8D44\u6E90</li><li>GET /login.html - \u57FA\u4E8EController</li></ul><p>\u6B64\u65F6\uFF0C\u6765\u4E2A\u52A0\u76DF\u5546<code>b.com</code>\uFF0C\u9664\u4E86\u76AE\u80A4\uFF0C\u9876\u7EA7\u57DF\u540D\u5916\uFF0C\u90FD\u548C<code>a.com</code>\u4E00\u6837\u3002<br> \u518D\u540E\u6765\uFF0C<code>b.com</code>\u6709\u4E86\u81EA\u5DF1\u7684\u9700\u6C42\uFF0C\u90E8\u5206\u754C\u9762\u548Curl\u548C<code>a.com</code>\u7684\u9700\u6C42\u5206\u53C9\u4E86\u3002 \u4E0D\u540C\u7684\u529F\u80FD\u81EA\u5DF1\u5B9E\u73B0\uFF0C\u653E\u5728\u7EA6\u5B9A\u7684prefix\u4E0B\uFF0C\u6B64\u65F6URL\u5206\u5E03\u5982\u4E0B\uFF0C</p>',7),p=s("GET /login.html - "),u={href:"http://a.com",target:"_blank",rel:"noopener noreferrer"},h=s("a.com"),m=s("(\u7236)\uFF0C"),_={href:"http://b.com",target:"_blank",rel:"noopener noreferrer"},b=s("b.com"),f=s("(\u5B50)"),k=s("GET /user-list.json - "),g={href:"http://a.com",target:"_blank",rel:"noopener noreferrer"},v=s("a.com"),x=s("(\u7236)"),R=s("GET /css/main.css - "),w={href:"http://a.com",target:"_blank",rel:"noopener noreferrer"},j=s("a.com"),E=s("(\u7236)"),q=s("GET /domain/b/user-list.json - "),L={href:"http://b.com",target:"_blank",rel:"noopener noreferrer"},T=s("b.com"),U=s("(\u5B50)"),F=s("GET /domain/b/css/main.css - "),C={href:"http://b.com",target:"_blank",rel:"noopener noreferrer"},G=s("b.com"),M=s("(\u5B50)"),y=n("p",null,"\u5F53\u7528\u6237\u8BBF\u95EE\u4EE5\u4E0BURL\u65F6\uFF0C\u6309\u7167java\u7684\u7236\u5B50\u7C7Boverride\u89C4\u5219\uFF0C\u8C03\u7528\u5982\u4E0B\uFF0C",-1),H={href:"http://a.com/login.html",target:"_blank",rel:"noopener noreferrer"},I=s("a.com/login.html"),N=s(" - /login.html(\u7236)"),S={href:"http://a.com/user-list.json",target:"_blank",rel:"noopener noreferrer"},D=s("a.com/user-list.json"),V=s(" - /user-info.list(\u7236)"),B={href:"http://a.com/css/main.css",target:"_blank",rel:"noopener noreferrer"},W=s("a.com/css/main.css"),A=s(" - /css/main.css(\u7236)"),z={href:"http://b.com/login.html",target:"_blank",rel:"noopener noreferrer"},J=s("b.com/login.html"),K=s(" - /login.html(\u7236)"),O={href:"http://b.com/user-list.json",target:"_blank",rel:"noopener noreferrer"},P=s("b.com/user-list.json"),Q=s(" - /domain/b/user-list.json(\u5B50)"),X={href:"http://b.com/css/main.css",target:"_blank",rel:"noopener noreferrer"},Y=s("b.com/css/main.css"),Z=s(" - /domain/b/css/main.css(\u5B50)"),$=t(`<p>\u5B9E\u9645\u9879\u76EE\u4E2D\uFF0C\u4EE5\u4E0A\u573A\u666F\u591A\u53D1\u751F\u5728resource\u548Ccontroller\u7684Mapping\u4E2D\u3002</p><ul><li>resource\u901A\u5E38\u6709<code>**</code>\u5339\u914D\uFF0C\u7528\u53CD\u5C04ResourceHttpRequestHandler.getResource\u68C0\u67E5\u3002</li><li>\u82E5\u975EResourceHttpRequestHandler\u4E14match<code>**</code>\uFF0C\u9700\u8981\u81EA\u5DF1\u8BBE\u6CD5\u68C0\u67E5\u8D44\u6E90\u662F\u5426\u5B58\u5728</li><li>\u6682\u65F6\u4E0D\u652F\u6301viewTemplate\uFF0C\u540C\u65F6\u4E5F\u7EA6\u5B9A\u6A21\u677F\u5FC5\u987B\u4F7F\u7528\u5168\u8DEF\u5F84\u3002</li></ul><p>\u6839\u636Ewings mapping\u7EA6\u5B9A\uFF0C\u907F\u514D\u4F7F\u7528\u76F8\u5BF9\u8DEF\u5F84\uFF0C\u6240\u4EE5\uFF0Cb.com\u8981\u5728\u5728class\u7EA7\u505A\u524D\u7F00\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Controller</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/domain/b&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>
 
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/user-info.json&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">fetchUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u4E0D\u652F\u6301view\uFF0C\u9700\u8981\u624B\u52A8\u6307\u5B9A</span>
        <span class="token keyword">return</span> <span class="token string">&quot;/domain/b/user-info&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3c-2-\u5B9E\u73B0\u539F\u7406" tabindex="-1"><a class="header-anchor" href="#_3c-2-\u5B9E\u73B0\u539F\u7406" aria-hidden="true">#</a> 3C.2.\u5B9E\u73B0\u539F\u7406</h2><p>\u5728spring mvc\u4F53\u7CFB\u4E2D\uFF0C\u4E00\u4E2A\u8BF7\u6C42\u8FDB\u5165servlet\u5BB9\u5668\u540E\uFF0C\u5728worker\u7EBF\u7A0B\u4E2D</p><ul><li>Filter#doFilter <code>before</code> chain.doFilter;</li><li>DispatcherServlet#doService <code>call</code> doDispatch</li><li>Filter#doFilter <code>after</code> chain.doFilter;</li></ul><p>wings\u901A\u8FC7WingsDomainFilter\uFF0C\u5148\u68C0\u67E5host\uFF0C\u5982\u679C\u662F\u7EE7\u627F\u57DF\uFF0C\u5219\u6784\u9020\u5B50\u57DF\u5168\u8DEF\u5F84url\uFF0C<br> \u901A\u8FC7\u68C0\u67E5\u7F13\u5B58\u548CDispatchServlet\u4E2D\u7684HandlerMapping\u518D\u6784\u9020RequestWrapper\u3002</p><p>\u6BD4\u5982\u7528\u6237\u8BBF\u95EE\u7684URL\u4E3A /user/login.json\uFF0C\u5047\u8BBE\u6EE1\u8DB3domain\u7EE7\u627F\uFF0Chost\u4E3Atrydofor\uFF0C \u5728\u670D\u52A1\u5668\u7AEF\u5B9E\u9645\u8BBF\u95EE\u7684\u8D44\u6E90\u662F /prefix/trydofor/user/login.json</p>`,9),nn=n("p",null,[s("\u5373\u589E\u52A0\u4E86 /"),n("span",{class:"katex"},[n("span",{class:"katex-mathml"},[n("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[n("semantics",null,[n("mrow",null,[n("mrow",null,[n("mi",null,"p"),n("mi",null,"r"),n("mi",null,"e"),n("mi",null,"f"),n("mi",null,"i"),n("mi",null,"x")]),n("mi",{mathvariant:"normal"},"/")]),n("annotation",{encoding:"application/x-tex"},"{prefix}/")])])]),n("span",{class:"katex-html","aria-hidden":"true"},[n("span",{class:"base"},[n("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),n("span",{class:"mord"},[n("span",{class:"mord mathnormal"},"p"),n("span",{class:"mord mathnormal"},"re"),n("span",{class:"mord mathnormal",style:{"margin-right":"0.10764em"}},"f"),n("span",{class:"mord mathnormal"},"i"),n("span",{class:"mord mathnormal"},"x")]),n("span",{class:"mord"},"/")])])]),s("{host}\u7684\u8DEF\u5F84\u5728\u5BA2\u6237\u8BBF\u95EEURI\u524D\u3002")],-1),sn=n("p",null,"\u77E5\u8BC6\u70B9\u63D0\u793A\uFF0C",-1),en=n("ul",null,[n("li",null,"\u5728FilterChain.doFilter\u8C03\u7528\u4E4B\u524DRequest\u53EF\u7528\uFF0C\u800C\u5176\u540EResponse\u53EF\u7528\u7684\uFF0C\u6CE8\u610F\u7EBF\u7A0B\u5B89\u5168\u548C\u6027\u80FD\u3002"),n("li",null,[s("\u9ED8\u8BA4\u9759\u6001\u8D44\u6E90\u5728classpath\u4E2D\u7684 "),n("code",null,"/static"),s(", "),n("code",null,"/public"),s(", "),n("code",null,"/resources"),s(", "),n("code",null,"/META-INF/resources")])],-1);function on(tn,an){const e=l("ExternalLinkIcon");return i(),r("div",null,[d,n("ul",null,[n("li",null,[p,n("a",u,[h,o(e)]),m,n("a",_,[b,o(e)]),f]),n("li",null,[k,n("a",g,[v,o(e)]),x]),n("li",null,[R,n("a",w,[j,o(e)]),E]),n("li",null,[q,n("a",L,[T,o(e)]),U]),n("li",null,[F,n("a",C,[G,o(e)]),M])]),y,n("ul",null,[n("li",null,[n("a",H,[I,o(e)]),N]),n("li",null,[n("a",S,[D,o(e)]),V]),n("li",null,[n("a",B,[W,o(e)]),A]),n("li",null,[n("a",z,[J,o(e)]),K]),n("li",null,[n("a",O,[P,o(e)]),Q]),n("li",null,[n("a",X,[Y,o(e)]),Z])]),$,nn,sn,en])}var cn=a(c,[["render",on],["__file","3c-host-ext.html.vue"]]);export{cn as default};
